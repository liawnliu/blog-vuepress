<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>5.组件化开发 | Liawn&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <meta charset="UTF-8">
  <link rel="icon" href="/blog-vuepress/favicon.ico">
    <meta name="description" content="用vuepress搭建的个人博客">
    <meta charset="UTF-8">
    
    <link rel="preload" href="/blog-vuepress/assets/css/0.styles.5c52d671.css" as="style"><link rel="preload" href="/blog-vuepress/assets/js/app.0d2e1fde.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/2.a046c74e.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/19.1d376bae.js" as="script"><link rel="prefetch" href="/blog-vuepress/assets/js/10.88d5532b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/100.a282e1e5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/101.1917817b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/102.426bef2e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/103.24a96e53.js"><link rel="prefetch" href="/blog-vuepress/assets/js/104.0b4b8196.js"><link rel="prefetch" href="/blog-vuepress/assets/js/105.98db5522.js"><link rel="prefetch" href="/blog-vuepress/assets/js/106.7a39c799.js"><link rel="prefetch" href="/blog-vuepress/assets/js/11.78e26b31.js"><link rel="prefetch" href="/blog-vuepress/assets/js/12.e39a10a3.js"><link rel="prefetch" href="/blog-vuepress/assets/js/13.da0e53c1.js"><link rel="prefetch" href="/blog-vuepress/assets/js/14.91a6c713.js"><link rel="prefetch" href="/blog-vuepress/assets/js/15.b9f3c2f3.js"><link rel="prefetch" href="/blog-vuepress/assets/js/16.01c98a8e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/17.e733ec41.js"><link rel="prefetch" href="/blog-vuepress/assets/js/18.f4fea388.js"><link rel="prefetch" href="/blog-vuepress/assets/js/20.4751d85a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/21.00437d3b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/22.64839502.js"><link rel="prefetch" href="/blog-vuepress/assets/js/23.7a4335d7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/24.3ee2b263.js"><link rel="prefetch" href="/blog-vuepress/assets/js/25.0767dbc8.js"><link rel="prefetch" href="/blog-vuepress/assets/js/26.c416d882.js"><link rel="prefetch" href="/blog-vuepress/assets/js/27.5e82d924.js"><link rel="prefetch" href="/blog-vuepress/assets/js/28.24de79c4.js"><link rel="prefetch" href="/blog-vuepress/assets/js/29.5a1e4f8e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/3.0b0dd8a7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/30.3c71597f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/31.f5f5fe9d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/32.eac572f0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/33.660b2af0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/34.b6f9bd89.js"><link rel="prefetch" href="/blog-vuepress/assets/js/35.2e5e8650.js"><link rel="prefetch" href="/blog-vuepress/assets/js/36.04d6e910.js"><link rel="prefetch" href="/blog-vuepress/assets/js/37.4ffc07ec.js"><link rel="prefetch" href="/blog-vuepress/assets/js/38.f31deb49.js"><link rel="prefetch" href="/blog-vuepress/assets/js/39.5bd11cdb.js"><link rel="prefetch" href="/blog-vuepress/assets/js/4.6edbb2a1.js"><link rel="prefetch" href="/blog-vuepress/assets/js/40.c0dc0955.js"><link rel="prefetch" href="/blog-vuepress/assets/js/41.32840955.js"><link rel="prefetch" href="/blog-vuepress/assets/js/42.afdf16b6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/43.04bbcb6b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/44.3f372036.js"><link rel="prefetch" href="/blog-vuepress/assets/js/45.199528f2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/46.c23ffbe2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/47.33bc80d6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/48.c17f8a84.js"><link rel="prefetch" href="/blog-vuepress/assets/js/49.9f6c2490.js"><link rel="prefetch" href="/blog-vuepress/assets/js/5.c6c641ea.js"><link rel="prefetch" href="/blog-vuepress/assets/js/50.d6762688.js"><link rel="prefetch" href="/blog-vuepress/assets/js/51.1b65f46c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/52.d00b4d17.js"><link rel="prefetch" href="/blog-vuepress/assets/js/53.becdeb67.js"><link rel="prefetch" href="/blog-vuepress/assets/js/54.fe84cbfc.js"><link rel="prefetch" href="/blog-vuepress/assets/js/55.42ca78e9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/56.38dc1cb5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/57.f4964e37.js"><link rel="prefetch" href="/blog-vuepress/assets/js/58.9b4d0044.js"><link rel="prefetch" href="/blog-vuepress/assets/js/59.cfb9c546.js"><link rel="prefetch" href="/blog-vuepress/assets/js/6.c6de6921.js"><link rel="prefetch" href="/blog-vuepress/assets/js/60.4f4f3658.js"><link rel="prefetch" href="/blog-vuepress/assets/js/61.e691fcda.js"><link rel="prefetch" href="/blog-vuepress/assets/js/62.fd6c77be.js"><link rel="prefetch" href="/blog-vuepress/assets/js/63.9acec8fc.js"><link rel="prefetch" href="/blog-vuepress/assets/js/64.c6c33b9e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/65.30e05c43.js"><link rel="prefetch" href="/blog-vuepress/assets/js/66.fdb85611.js"><link rel="prefetch" href="/blog-vuepress/assets/js/67.4a8c9b0e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/68.cf4c210b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/69.b27adaff.js"><link rel="prefetch" href="/blog-vuepress/assets/js/7.4196f4e6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/70.a3316969.js"><link rel="prefetch" href="/blog-vuepress/assets/js/71.9eb46133.js"><link rel="prefetch" href="/blog-vuepress/assets/js/72.0fe4fe9a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/73.0bf36b4a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/74.fc2e628a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/75.205b56bf.js"><link rel="prefetch" href="/blog-vuepress/assets/js/76.8c2bf9b9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/77.a0993252.js"><link rel="prefetch" href="/blog-vuepress/assets/js/78.41709f17.js"><link rel="prefetch" href="/blog-vuepress/assets/js/79.c8733b25.js"><link rel="prefetch" href="/blog-vuepress/assets/js/8.f87272cd.js"><link rel="prefetch" href="/blog-vuepress/assets/js/80.f5ed5113.js"><link rel="prefetch" href="/blog-vuepress/assets/js/81.ddb61980.js"><link rel="prefetch" href="/blog-vuepress/assets/js/82.1d3482a9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/83.a28d44e2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/84.ce75ed5e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/85.d4ffd27c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/86.14ffaf35.js"><link rel="prefetch" href="/blog-vuepress/assets/js/87.482be605.js"><link rel="prefetch" href="/blog-vuepress/assets/js/88.c1035bd5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/89.e739598f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/9.0f96b506.js"><link rel="prefetch" href="/blog-vuepress/assets/js/90.5a928d71.js"><link rel="prefetch" href="/blog-vuepress/assets/js/91.82d05736.js"><link rel="prefetch" href="/blog-vuepress/assets/js/92.8c0f11ee.js"><link rel="prefetch" href="/blog-vuepress/assets/js/93.5cff49c0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/94.8ad61574.js"><link rel="prefetch" href="/blog-vuepress/assets/js/95.f849a0b0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/96.31401883.js"><link rel="prefetch" href="/blog-vuepress/assets/js/97.98310d37.js"><link rel="prefetch" href="/blog-vuepress/assets/js/98.f626e78b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/99.6891a17b.js">
    <link rel="stylesheet" href="/blog-vuepress/assets/css/0.styles.5c52d671.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><a href="/blog-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">Liawn's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog-vuepress/book-web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/blog-vuepress/book-sketches/" class="nav-link">
  生活
</a></div> <!----></nav></div></header> <div class="sidebar-wrapper sidebar-hidden"><aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog-vuepress/book-web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/blog-vuepress/book-sketches/" class="nav-link">
  生活
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span>web前端</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习JavaScript</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习CSS/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习CSS</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习TypeScript/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习TypeScript</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/web前端js框架/学习Vue/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习Vue</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/web前端js框架/学习React/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习React</span></a> <!----></section></li><li><a href="/blog-vuepress/book-web/web前端js框架/学习jQuery.html" class="sidebar-link">jQueryNote</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/LayaBox游戏引擎/" class="sidebar-heading clickable open"><span class="arrow down"></span> <span>H5游戏引擎Laya</span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-vuepress/book-web/LayaBox游戏引擎/1.环境搭建.html" class="sidebar-link">1.环境搭建</a></li><li><a href="/blog-vuepress/book-web/LayaBox游戏引擎/2.IDE的使用.html" class="sidebar-link">2.IDE的使用</a></li><li><a href="/blog-vuepress/book-web/LayaBox游戏引擎/3.组件库的介绍.html" class="sidebar-link">3.组件库的介绍</a></li><li><a href="/blog-vuepress/book-web/LayaBox游戏引擎/4.常用组件详解.html" class="sidebar-link">4.常用组件详解</a></li><li><a href="/blog-vuepress/book-web/LayaBox游戏引擎/5.组件化开发.html" class="active sidebar-link">5.组件化开发</a></li><li><a href="/blog-vuepress/book-web/LayaBox游戏引擎/6.屏幕适配与抗锯齿.html" class="sidebar-link">6.屏幕适配与抗锯齿</a></li><li><a href="/blog-vuepress/book-web/LayaBox游戏引擎/7.性能优化.html" class="sidebar-link">7.屏幕适配与抗锯齿</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>数据结构与算法</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/数据结构与算法/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>数据结构与算法ts版</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>常用工具</span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-vuepress/book-web/常用工具/Npm的使用.html" class="sidebar-link">Npm的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/Git的使用.html" class="sidebar-link">Git的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/webpack的使用.html" class="sidebar-link">webpack的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/VSCode的使用.html" class="sidebar-link">VSCode的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/Chrome的使用.html" class="sidebar-link">Chrome的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/使用docsify写blog.html" class="sidebar-link">使用docsify写blog</a></li><li><a href="/blog-vuepress/book-web/常用工具/使用gitbook写blog.html" class="sidebar-link">使用gitbook写blog</a></li><li><a href="/blog-vuepress/book-web/web前端测试与调试/基于mocha+chai的单元测试.html" class="sidebar-link">使用mocha+chai进行单元测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>简单项目实践</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/项目/react+express+ts写爬虫/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>react+express+ts写爬虫</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>面试准备</span></p> <!----></section></li></ul> </aside> <div class="sidebar-toggle" data-v-10bfdc0c><div class="sidebar-toggle-button" data-v-10bfdc0c><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span></div></div></div> <main class="page sidebar-hidden right-sidebar-hidden"> <div class="theme-default-content content__default"><h1 id="组件化开发"><a href="#组件化开发" class="header-anchor">#</a> 组件化开发</h1> <h2 id="组件化开发的思想"><a href="#组件化开发的思想" class="header-anchor">#</a> 组件化开发的思想</h2> <p>很多项目的 <strong>耦合性比较高</strong>，后期改造、维护难度比较大，如果项目 <strong>使用“组件化开发”</strong> 这种模式，可以对项目进行很大程度上的 <strong>解耦</strong>，也就降低了维护项目的难度和成本。“组件化开发”的 <strong>核心思想是尽可能将业务逻辑模块化</strong>，将逻辑都写在脚本里，然后将脚本和组件关联起来，使用组件时对应的脚本就会运行。</p> <h2 id="组件化开发-中的组件"><a href="#组件化开发-中的组件" class="header-anchor">#</a> “组件化开发”中的组件</h2> <p>在<a href="/blog-vuepress/book-web/LayaBox游戏引擎/3.组件库的介绍.html">3.组件库的介绍</a>这篇里介绍过组件库，也提到过功能类组件，这些都是“组件化开发”中的组件，可以整体的分为这样几类：<br> <img src="/blog-vuepress/assets/img/组件分类.1f6699c1.png" alt="组件分类"><br>
该图片地址：<a href="https://www.processon.com/mindmap/5f58fba0e401fd60bdeb855b" target="_blank" rel="noopener noreferrer">https://www.processon.com/mindmap/5f58fba0e401fd60bdeb855b<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><strong>节点类组件(Node)</strong>：2D基础组件（Animation\HTMLDivElement\Sprite\Text）、基础显示组件（Button\Image\Label等）、容器组件（Box\List\Panel等）、视图组件（Scene\View\Dialog）；</li> <li><strong>绘图类组件(Graphics)</strong>：矢量图（Circle\Curves\Line等）、纹理（Texture\FillTexture）和文本（FillText）；</li> <li><strong>功能类组件(Component)</strong>：组件（脚本组件、物理组件等）、泛组件（滤镜组件，类似Component）。</li></ul> <h2 id="组件化开发的方式"><a href="#组件化开发的方式" class="header-anchor">#</a> 组件化开发的方式</h2> <p>组件有自己的 <strong>生命周期</strong>，在对应的生命周期函数里可以执行一些游戏逻辑，如果 <strong>将一个脚本继承自组件</strong>，然后在脚本里 <strong>重写组件的生命周期函数并写上相应的游戏逻辑</strong> ，这样的开发方式叫做 <strong>runTime脚本进行组件化开发</strong>。</p> <p>如果不使用runtime方式，可以 <strong>给组件挂载一个script脚本（不继承自组件，是挂载的方式）</strong>，该脚本 <strong>也有自己的生命周期</strong> 并与组件的生命周期是 <strong>息息相关的</strong>，这种开发方式叫做 <strong>script脚本进行组件化开发</strong>。</p> <p>两种方式的差异和应用会在最后一小节<a href="#%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">“两种方式的区别和应用场景”</a>里讲述。</p> <h2 id="script脚本开发流程"><a href="#script脚本开发流程" class="header-anchor">#</a> script脚本开发流程</h2> <h3 id="script脚本挂载到组件上"><a href="#script脚本挂载到组件上" class="header-anchor">#</a> script脚本挂载到组件上</h3> <p>其实在上一个章节就提到过怎么将script脚本添加到组件上了，这里梳理一下：</p> <ul><li>准备好 <strong>目标组件</strong> ，然后在项目的src/script目录下新建一个脚本，使用的是ts语言，那脚本就是xxx.ts之类的；</li> <li>将脚本拖拽到层级面板中的 <strong>目标组件节点下</strong> 或者直接拖拽到 <strong>目标组件的属性面板里</strong>，这样script脚本就挂载到组件上了；</li> <li>除了拖拽的方法外，还可以在目标组件的 <strong>属性面板</strong> 最下方点击 <strong>“添加组件”</strong>，选择“Code”再选择对应的脚本即可。</li></ul> <p><img src="/blog-vuepress/assets/img/挂载script脚本到组件上.563f5279.png" alt="挂载script脚本到组件上"></p> <h3 id="编写script脚本"><a href="#编写script脚本" class="header-anchor">#</a> 编写script脚本</h3> <p>比如在组件激活时（onEnable）将图片放大至两倍，最基本的脚本写法：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">scaleDemo</span> <span class="token keyword">extends</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span>Script <span class="token punctuation">{</span>
    <span class="token keyword">public</span> img<span class="token operator">:</span> Laya<span class="token punctuation">.</span>Image<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// UI组件的赋值最好在onEnable里编写，别在构造函数里写，因为组件可能还没有激活</span>
    <span class="token function">onEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// script脚本化开发，获取本组件是通过this.owner来获取的</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>owner <span class="token keyword">as</span> Laya<span class="token punctuation">.</span>Image<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img<span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img<span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">onDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="script脚本属性在ide里可视化"><a href="#script脚本属性在ide里可视化" class="header-anchor">#</a> script脚本属性在IDE里可视化</h3> <p>1)可以将script脚本中的属性在IDE中显示出来，示例如下</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">/** @prop {name:big,tips:&quot;放大&quot;,type:int,default:2} */</span>
<span class="token keyword">public</span> big<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,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" alt="属性可视化"></p> <p>2)定义属性常用的字段解释：</p> <ul><li><strong>name</strong>：属性在IDE中展示的名字；</li> <li><strong>tips</strong>：在IDE里将鼠标悬浮到属性上时，会展示一个tips提示；</li> <li><strong>default</strong>：属性在IDE中展示的默认值，在 <strong>script脚本中也要给变量赋值这个默认值</strong>，否则可能会发生一些错误或者达不到效果；</li> <li><strong>type</strong>：属性在IDE里的数据类型，<strong>Number、Int（ts对应number）、String、Boolean（布尔类型，ts对应boolean）、Color（颜色，ts对应string）、Vec（数组，ts对应number[]）、Vector（动态数组，ts对应any[]）、Option（下拉框，ts对应string）、EditOption（可编辑下拉框但不能定义默认值，ts对应string）、Ease（缓动类型，ts对应string）、sNumber（数字滑动条，ts对应number）、Prefab（预制体，代码对应Laya.Prefab）、Node（节点，代码对应Laya.xxx）、Nodes（对节点，代码是Laya.xxx的数组形式）</strong> 等等；</li> <li><strong>accept和acceptTypes</strong>：当 <strong>type为string</strong> 时，可以使用 <strong>accept和acceptTypes</strong> 来具体约束这个string；比如accept可以是 <strong>res、files</strong>，意思是属性的类型要是 <strong>资源路径、文件路径</strong>，acceptTypes可以是 <strong>&quot;png,jpg&quot;</strong>，意思是路径后缀必须是 <strong>png、jpg</strong></li> <li><strong>option</strong>：当 <strong>type为Option</strong> 时，option用来存放 <strong>下拉框所有选项</strong>；</li> <li><strong>min和max</strong>：当 <strong>sNumber</strong> 时，min和max就是 <strong>滑动条的上下限</strong>；</li></ul> <p>PS：预制体在script脚本中使用，<strong>this.prefab.create()或者this.prefab.json.props.texture</strong></p> <h3 id="重写声明周期函数"><a href="#重写声明周期函数" class="header-anchor">#</a> 重写声明周期函数</h3> <p>Laya.Script有自己的生命周期函数，script脚本继承自Laya.Script，重写对应的生命周期函数，并在其中编写控制组件的逻辑代码</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">scaleDemo</span> <span class="token keyword">extends</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span>Script <span class="token punctuation">{</span>
    <span class="token comment">/** @prop {name:big,tips:&quot;放大&quot;,type:int,default:2} */</span>
    <span class="token keyword">public</span> big<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">/** @prop {name:small,tips:&quot;缩小&quot;,type:number,default:0.5} */</span>
    <span class="token keyword">public</span> small<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> img<span class="token operator">:</span> Laya<span class="token punctuation">.</span>Image<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// UI组件的赋值最好在onEnable里编写，别在构造函数里写，因为组件可能还没有激活</span>
    <span class="token function">onEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// script脚本化开发，获取本组件是通过this.owner来获取的</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>owner <span class="token keyword">as</span> Laya<span class="token punctuation">.</span>Image<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 键盘按下</span>
    <span class="token function">onKeyDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img<span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>small<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img<span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>small<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 每帧更新</span>
    <span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 旋转</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img<span class="token punctuation">.</span>rotation<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 鼠标按下</span>
    <span class="token function">onMouseDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 按住拖住</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img<span class="token punctuation">.</span><span class="token function">startDrag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 在舞台上点击</span>
    <span class="token function">onStageClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img<span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>big<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>img<span class="token punctuation">.</span>scaleY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>big<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">onDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="了解整个生命周期"><a href="#了解整个生命周期" class="header-anchor">#</a> 了解整个生命周期</h3> <p>1)script脚本的生命周期：<br> <img src="/blog-vuepress/assets/img/Script生命周期.b13daa38.jpg" alt="Script生命周期"><br>
script脚本除了生命周期函数以外，还有一些鼠标点击、键盘和碰撞等事件，当然也不止这些事件，可以去<a href="http://layaair2.ldc2.layabox.com/api2/Chinese/index.html?category=Core&amp;class=laya.components.Script" target="_blank" rel="noopener noreferrer">laya.components.Script<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>这个API里查看事件。</p> <p>2)runtime脚本的生命周期，也是节点or组件的生命周期：<br> <img src="/blog-vuepress/assets/img/节点及组件生命周期.a67b21d3.jpg" alt="节点及组件生命周期"></p> <ul><li><strong>创建节点</strong>：会先创建节点的 <strong>script脚本（执行script脚本的构造函数）</strong>，再创建节点的 <strong>子节点（执行子节点的构造函数）</strong>，这样就完成了一个节点的创建；</li> <li><strong>addToStage</strong>：先激活 <strong>script脚本（执行script脚本的onAwake函数再执行onEnable函数）</strong>，再激活 <strong>子节点（执行子节点的onAwake函数再执行onEnable函数）</strong>，完成这两步之后才激活 <strong>节点本身（执行节点本身的onAwake函数再执行onEnable函数）</strong>；</li> <li><strong>removeFromStage</strong>：先禁用 <strong>script脚本（执行script脚本的onDisable函数）</strong>，再禁用 <strong>子节点（执行子节点的onDisable函数）</strong>，完成这两步之后才禁用 <strong>节点本身（执行节点本身的onDisable函数）</strong>；</li> <li><strong>destroy</strong>：会先判断节点是否已经禁用了，没有禁用的先禁用（removeFromStage）；然后会去销毁 <strong>script脚本（执行script脚本的onDestroy函数）</strong>，再去销毁 <strong>子节点（执行子节点的onDestroy函数）</strong>，完成这两步之后才销毁 <strong>节点本身（执行节点本身的onDestroy函数）</strong>。</li></ul> <p>也就是说 <strong>runtime脚本的生命周期函数只有四个：onAwake（激活）、onEnable（启用）、onDisable（禁用）、onDestroy（销毁）</strong>，而 <strong>script脚本不止四个并且还带有鼠标、键盘、碰撞事件</strong>。</p> <h2 id="runtime脚本开发流程"><a href="#runtime脚本开发流程" class="header-anchor">#</a> runtime脚本开发流程</h2> <h3 id="关联runtime脚本"><a href="#关联runtime脚本" class="header-anchor">#</a> 关联runtime脚本</h3> <p>直接将runtime脚本拖拽到组件的runtime属性里，或者直接在runtime属性里输入runtime脚本的路径。<br> <img src="data:image/png;base64,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" alt="关联runtime脚本"></p> <h3 id="编写runtime脚本"><a href="#编写runtime脚本" class="header-anchor">#</a> 编写runtime脚本</h3> <p>编写runtime脚本需要注意的是</p> <ul><li>runtime脚本生命周期函数只有四个：<strong>onAwake（激活）、onEnable（启用）、onDisable（禁用）、onDestroy（销毁）</strong></li> <li>没有script脚本的 <strong>属性可视化</strong>，因为本来就是继承自组件，不需要可视化</li></ul> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ListUI</span> <span class="token keyword">extends</span> <span class="token class-name">Laya</span><span class="token punctuation">.</span>Dialog <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token function">onEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token comment">//模拟数据结构</span>
        <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;top&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;玩家名字1&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;fontSize&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;top&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;玩家名字2&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;fontSize&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;90&quot;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;top&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;玩家名字3&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;fontSize&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;score&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;80&quot;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> _list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getChildByName</span><span class="token punctuation">(</span><span class="token string">&quot;_list&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Laya<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
        _list<span class="token punctuation">.</span>array <span class="token operator">=</span> arr<span class="token punctuation">;</span>

        <span class="token comment">//刷新List</span>
        _list<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">onDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="发布模式对runtime脚本的影响"><a href="#发布模式对runtime脚本的影响" class="header-anchor">#</a> 发布模式对runtime脚本的影响</h3> <p>之前在<a href="/blog-vuepress/book-web/LayaBox游戏引擎/2.IDE的使用.html#项目设置">2.IDE的使用#项目设置</a>里提到过“场景的发布模式”，这里简单做一个总结：</p> <ul><li><strong>“内嵌模式”</strong> 生成了场景类并将UI数据内嵌到类里，使用方便但是代码包体积大；</li> <li><strong>“加载模式”</strong> 也生成场景类但将所有UI数据放到一个UI.json里（UI数据从类里分离出来了），减少了代码包体积但需要提前加载大的UI.json；</li> <li>小游戏问世前常使用“内嵌模式”和“加载模式”，后来常使用“分离模式”和“文件模式”。</li> <li><strong>“分离模式”</strong> 也生成场景类但每个场景的UI数据有单独的场景数据文件，并且引擎是自动加载场景对应的场景数据文件；</li> <li><strong>“文件模式”</strong> 没有生成场景类（所以不能使用var要使用getchild操作子节点），只有场景数据文件并通过Scene.load来加载使用，大大减少了代码包体积。</li> <li>建议是 <strong>将项目设置的发布模式设置为“文件模式”</strong>，如果某个场景的 <strong>层级复杂、操作频繁并使用了runtime脚本</strong>，getchild会很麻烦且效率低，那么可以 <strong>单独将这个场景的发布模式设置为“分离模式”</strong>，这样就可以使用var了；也就是绝大多数的场景使用“文件模式”，个别使用“分离模式”。</li></ul> <h2 id="两种方式的区别和应用场景"><a href="#两种方式的区别和应用场景" class="header-anchor">#</a> 两种方式的区别和应用场景</h2> <h3 id="区别"><a href="#区别" class="header-anchor">#</a> 区别</h3> <ul><li>runtime脚本是 <strong>直接继承自组件</strong> ，本组件直接就是this，其子节点获取方式是 <strong>getChildByName</strong> 或者 <strong>分离模式下搭配var</strong> ；</li> <li>script脚本是 <strong>继承自Laya.Script</strong>，本组件是 <strong>this.owner</strong> ，其子节点获取方式是 <strong>getChildByName</strong> 或者使用 <strong>定义属性可视化来绑定子节点</strong>（type设置为Node，将子节点拖拽到该自定义属性里）；</li> <li>如果两种方式不考虑其他而都使用getChildByName来获取子节点，由于script脚本多一层owner，会导致效率会低一些；</li> <li>对比两种方式的生命周期图，会发现 <strong>script脚本的生命周期函数更多并且还自带鼠标、键盘和碰撞的方法</strong>，而 <strong>runtime脚本的生命周期函数只有四个：onAwake（激活）、onEnable（启用）、onDisable（禁用）、onDestroy（销毁）</strong>。</li></ul> <h3 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> 应用场景</h3> <ul><li>像一些主场景、大的页面UI这样的，可能需要频繁地访问页面内多个元素（多为显示隐藏等类似简单逻辑），这样的应用场景下可以使用runtime脚本；</li> <li>如果主场景、大的页面UI里涉及到的业务很多且很复杂，像runtime脚本的四个生命周期函数和this.on复杂绑定方式满足不了开发需求，可以使用script脚本；当然，UI中具体的节点也会涉及到一些逻辑，这样的建议使用script脚本挂载。</li> <li>也就是说，像控制显示隐藏这样的简单逻辑的使用runtime脚本就足够了，更多地是涉及到复杂业务逻辑就使用script脚本（例如游戏总控制、角色控制等）。</li></ul> <p><img src="/blog-vuepress/assets/img/组件化开发应用场景.63414b65.png" alt="关联runtime脚本"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/6/2022, 3:41:21 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog-vuepress/book-web/LayaBox游戏引擎/4.常用组件详解.html" class="prev">
        4.常用组件详解
      </a></span> <span class="next"><a href="/blog-vuepress/book-web/LayaBox游戏引擎/6.屏幕适配与抗锯齿.html">
        6.屏幕适配与抗锯齿
      </a>
      →
    </span></p></div> </main> <div class="right-sidebar-wrapper right-sidebar-hidden"><aside class="right-sidebar"><ul><h4>本文目录</h4></ul></aside> <div class="sidebar-toggle" data-v-10bfdc0c><div class="sidebar-toggle-button" data-v-10bfdc0c><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span></div></div></div></div><div class="global-ui"></div></div>
    <script src="/blog-vuepress/assets/js/app.0d2e1fde.js" defer></script><script src="/blog-vuepress/assets/js/2.a046c74e.js" defer></script><script src="/blog-vuepress/assets/js/19.1d376bae.js" defer></script>
  </body>
</html>
