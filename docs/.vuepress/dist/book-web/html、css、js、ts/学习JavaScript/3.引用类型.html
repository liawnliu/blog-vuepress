<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3.引用类型 | Liawn&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <meta charset="UTF-8">
  <link rel="icon" href="/blog-vuepress/favicon.ico">
    <meta name="description" content="用vuepress搭建的个人博客">
    <meta charset="UTF-8">
    
    <link rel="preload" href="/blog-vuepress/assets/css/0.styles.5c52d671.css" as="style"><link rel="preload" href="/blog-vuepress/assets/js/app.0d2e1fde.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/2.a046c74e.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/70.a3316969.js" as="script"><link rel="prefetch" href="/blog-vuepress/assets/js/10.88d5532b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/100.a282e1e5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/101.1917817b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/102.426bef2e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/103.24a96e53.js"><link rel="prefetch" href="/blog-vuepress/assets/js/104.0b4b8196.js"><link rel="prefetch" href="/blog-vuepress/assets/js/105.98db5522.js"><link rel="prefetch" href="/blog-vuepress/assets/js/106.7a39c799.js"><link rel="prefetch" href="/blog-vuepress/assets/js/11.78e26b31.js"><link rel="prefetch" href="/blog-vuepress/assets/js/12.e39a10a3.js"><link rel="prefetch" href="/blog-vuepress/assets/js/13.da0e53c1.js"><link rel="prefetch" href="/blog-vuepress/assets/js/14.91a6c713.js"><link rel="prefetch" href="/blog-vuepress/assets/js/15.b9f3c2f3.js"><link rel="prefetch" href="/blog-vuepress/assets/js/16.01c98a8e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/17.e733ec41.js"><link rel="prefetch" href="/blog-vuepress/assets/js/18.f4fea388.js"><link rel="prefetch" href="/blog-vuepress/assets/js/19.1d376bae.js"><link rel="prefetch" href="/blog-vuepress/assets/js/20.4751d85a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/21.00437d3b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/22.64839502.js"><link rel="prefetch" href="/blog-vuepress/assets/js/23.7a4335d7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/24.3ee2b263.js"><link rel="prefetch" href="/blog-vuepress/assets/js/25.0767dbc8.js"><link rel="prefetch" href="/blog-vuepress/assets/js/26.c416d882.js"><link rel="prefetch" href="/blog-vuepress/assets/js/27.5e82d924.js"><link rel="prefetch" href="/blog-vuepress/assets/js/28.24de79c4.js"><link rel="prefetch" href="/blog-vuepress/assets/js/29.5a1e4f8e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/3.0b0dd8a7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/30.3c71597f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/31.f5f5fe9d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/32.eac572f0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/33.660b2af0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/34.b6f9bd89.js"><link rel="prefetch" href="/blog-vuepress/assets/js/35.2e5e8650.js"><link rel="prefetch" href="/blog-vuepress/assets/js/36.04d6e910.js"><link rel="prefetch" href="/blog-vuepress/assets/js/37.4ffc07ec.js"><link rel="prefetch" href="/blog-vuepress/assets/js/38.f31deb49.js"><link rel="prefetch" href="/blog-vuepress/assets/js/39.5bd11cdb.js"><link rel="prefetch" href="/blog-vuepress/assets/js/4.6edbb2a1.js"><link rel="prefetch" href="/blog-vuepress/assets/js/40.c0dc0955.js"><link rel="prefetch" href="/blog-vuepress/assets/js/41.32840955.js"><link rel="prefetch" href="/blog-vuepress/assets/js/42.afdf16b6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/43.04bbcb6b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/44.3f372036.js"><link rel="prefetch" href="/blog-vuepress/assets/js/45.199528f2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/46.c23ffbe2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/47.33bc80d6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/48.c17f8a84.js"><link rel="prefetch" href="/blog-vuepress/assets/js/49.9f6c2490.js"><link rel="prefetch" href="/blog-vuepress/assets/js/5.c6c641ea.js"><link rel="prefetch" href="/blog-vuepress/assets/js/50.d6762688.js"><link rel="prefetch" href="/blog-vuepress/assets/js/51.1b65f46c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/52.d00b4d17.js"><link rel="prefetch" href="/blog-vuepress/assets/js/53.becdeb67.js"><link rel="prefetch" href="/blog-vuepress/assets/js/54.fe84cbfc.js"><link rel="prefetch" href="/blog-vuepress/assets/js/55.42ca78e9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/56.38dc1cb5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/57.f4964e37.js"><link rel="prefetch" href="/blog-vuepress/assets/js/58.9b4d0044.js"><link rel="prefetch" href="/blog-vuepress/assets/js/59.cfb9c546.js"><link rel="prefetch" href="/blog-vuepress/assets/js/6.c6de6921.js"><link rel="prefetch" href="/blog-vuepress/assets/js/60.4f4f3658.js"><link rel="prefetch" href="/blog-vuepress/assets/js/61.e691fcda.js"><link rel="prefetch" href="/blog-vuepress/assets/js/62.fd6c77be.js"><link rel="prefetch" href="/blog-vuepress/assets/js/63.9acec8fc.js"><link rel="prefetch" href="/blog-vuepress/assets/js/64.c6c33b9e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/65.30e05c43.js"><link rel="prefetch" href="/blog-vuepress/assets/js/66.fdb85611.js"><link rel="prefetch" href="/blog-vuepress/assets/js/67.4a8c9b0e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/68.cf4c210b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/69.b27adaff.js"><link rel="prefetch" href="/blog-vuepress/assets/js/7.4196f4e6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/71.9eb46133.js"><link rel="prefetch" href="/blog-vuepress/assets/js/72.0fe4fe9a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/73.0bf36b4a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/74.fc2e628a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/75.205b56bf.js"><link rel="prefetch" href="/blog-vuepress/assets/js/76.8c2bf9b9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/77.a0993252.js"><link rel="prefetch" href="/blog-vuepress/assets/js/78.41709f17.js"><link rel="prefetch" href="/blog-vuepress/assets/js/79.c8733b25.js"><link rel="prefetch" href="/blog-vuepress/assets/js/8.f87272cd.js"><link rel="prefetch" href="/blog-vuepress/assets/js/80.f5ed5113.js"><link rel="prefetch" href="/blog-vuepress/assets/js/81.ddb61980.js"><link rel="prefetch" href="/blog-vuepress/assets/js/82.1d3482a9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/83.a28d44e2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/84.ce75ed5e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/85.d4ffd27c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/86.14ffaf35.js"><link rel="prefetch" href="/blog-vuepress/assets/js/87.482be605.js"><link rel="prefetch" href="/blog-vuepress/assets/js/88.c1035bd5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/89.e739598f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/9.0f96b506.js"><link rel="prefetch" href="/blog-vuepress/assets/js/90.5a928d71.js"><link rel="prefetch" href="/blog-vuepress/assets/js/91.82d05736.js"><link rel="prefetch" href="/blog-vuepress/assets/js/92.8c0f11ee.js"><link rel="prefetch" href="/blog-vuepress/assets/js/93.5cff49c0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/94.8ad61574.js"><link rel="prefetch" href="/blog-vuepress/assets/js/95.f849a0b0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/96.31401883.js"><link rel="prefetch" href="/blog-vuepress/assets/js/97.98310d37.js"><link rel="prefetch" href="/blog-vuepress/assets/js/98.f626e78b.js"><link rel="prefetch" href="/blog-vuepress/assets/js/99.6891a17b.js">
    <link rel="stylesheet" href="/blog-vuepress/assets/css/0.styles.5c52d671.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><a href="/blog-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">Liawn's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog-vuepress/book-web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/blog-vuepress/book-sketches/" class="nav-link">
  生活
</a></div> <!----></nav></div></header> <div class="sidebar-wrapper sidebar-hidden"><aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog-vuepress/book-web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/blog-vuepress/book-sketches/" class="nav-link">
  生活
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span>web前端</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/" class="sidebar-heading clickable open"><span class="arrow down"></span> <span>学习JavaScript</span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/1.基础语法.html" class="sidebar-link">1.基础语法</a></li><li><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/2.变量、作用域和内存问题.html" class="sidebar-link">2.变量、作用域和内存问题</a></li><li><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/3.引用类型.html" class="active sidebar-link">3.引用类型</a></li><li><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/4.面向对象程序设计.html" class="sidebar-link">4.面向对象程序设计</a></li><li><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/5.函数表达式.html" class="sidebar-link">5.函数表达式</a></li><li><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/6.Http、Ajax和跨域.html" class="sidebar-link">6.Http、Ajax和跨域</a></li><li><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/7.异步编程.html" class="sidebar-link">7.异步编程</a></li><li><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/js零碎知识和案例.html" class="sidebar-link">js部分</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习CSS/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习CSS</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习TypeScript/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习TypeScript</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/web前端js框架/学习Vue/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习Vue</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/web前端js框架/学习React/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习React</span></a> <!----></section></li><li><a href="/blog-vuepress/book-web/web前端js框架/学习jQuery.html" class="sidebar-link">jQueryNote</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/LayaBox游戏引擎/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>H5游戏引擎Laya</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>数据结构与算法</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/数据结构与算法/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>数据结构与算法ts版</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>常用工具</span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-vuepress/book-web/常用工具/Npm的使用.html" class="sidebar-link">Npm的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/Git的使用.html" class="sidebar-link">Git的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/webpack的使用.html" class="sidebar-link">webpack的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/VSCode的使用.html" class="sidebar-link">VSCode的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/Chrome的使用.html" class="sidebar-link">Chrome的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/使用docsify写blog.html" class="sidebar-link">使用docsify写blog</a></li><li><a href="/blog-vuepress/book-web/常用工具/使用gitbook写blog.html" class="sidebar-link">使用gitbook写blog</a></li><li><a href="/blog-vuepress/book-web/web前端测试与调试/基于mocha+chai的单元测试.html" class="sidebar-link">使用mocha+chai进行单元测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>简单项目实践</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/项目/react+express+ts写爬虫/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>react+express+ts写爬虫</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>面试准备</span></p> <!----></section></li></ul> </aside> <div class="sidebar-toggle" data-v-10bfdc0c><div class="sidebar-toggle-button" data-v-10bfdc0c><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span></div></div></div> <main class="page sidebar-hidden right-sidebar-hidden"> <div class="theme-default-content content__default"><h1 id="引用类型"><a href="#引用类型" class="header-anchor">#</a> 引用类型</h1> <p></p><div class="table-of-contents"><ul><li><a href="#一、object类型">一、Object类型</a></li><li><a href="#二、array类型">二、Array类型</a><ul><li><a href="#_2-1-创建数组">2.1 创建数组</a></li><li><a href="#_2-2-isarray检测数组">2.2 isArray检测数组</a></li><li><a href="#_2-3-tostring-valueof等转换方法">2.3 toString/valueOf等转换方法</a></li><li><a href="#_2-4-push-pop尾部添加移除">2.4 push/pop尾部添加移除</a></li><li><a href="#_2-5-unshift-shift首部添加移除">2.5 unshift/shift首部添加移除</a></li><li><a href="#_2-6-reverse-sort重排序">2.6 reverse/sort重排序</a></li><li><a href="#_2-7-concat-slice-splice拼接裁剪">2.7 concat/slice/splice拼接裁剪</a></li><li><a href="#_2-8-indexof-lastindexof搜索项">2.8 indexOf/lastIndexOf搜索项</a></li><li><a href="#_2-9-every-some-filter-map-foreach迭代">2.9 every/some/filter/map/forEach迭代</a></li><li><a href="#_2-10-reduce-reduceright归并">2.10 reduce/reduceRight归并</a></li></ul></li><li><a href="#三、date类型">三、Date类型</a></li><li><a href="#四、regexp类型">四、RegExp类型</a><ul><li><a href="#_4-1-regexp实例属性">4.1 RegExp实例属性</a></li><li><a href="#_4-2-regexp实例方法">4.2 RegExp实例方法</a></li><li><a href="#_4-3-regexp构造函数属性">4.3 RegExp构造函数属性</a></li><li><a href="#_4-4-模式的局限性">4.4 模式的局限性</a></li></ul></li><li><a href="#五、function类型">五、Function类型</a><ul><li><a href="#_5-1-函数声明-函数表达式-构造函数的区别">5.1 函数声明/函数表达式/构造函数的区别</a></li><li><a href="#_5-2-没有重载">5.2 没有重载</a></li><li><a href="#_5-3-作为值的函数">5.3 作为值的函数</a></li><li><a href="#_5-4-函数内部属性-arguments-this">5.4 函数内部属性(arguments/this)</a></li><li><a href="#_5-5-函数属性和方法-apply-call-bind">5.5 函数属性和方法(apply/call/bind)</a></li></ul></li><li><a href="#六、基本包装类型">六、基本包装类型</a><ul><li><a href="#_6-1-boolean包装类型">6.1 Boolean包装类型</a></li><li><a href="#_6-2-number包装类型">6.2 Number包装类型</a></li><li><a href="#_6-3-string包装类型">6.3 String包装类型</a><ul><li><a href="#_6-3-1-charat-charcodeat字符">6.3.1 charAt/charCodeAt字符</a></li><li><a href="#_6-3-2-concat-slice-substr-substring拼接裁剪">6.3.2 concat/slice/substr/substring拼接裁剪</a></li><li><a href="#_6-3-3-indexof-lastindexof搜索字符">6.3.3 indexOf/lastIndexOf搜索字符</a></li><li><a href="#_6-3-4-trim删除空格">6.3.4 trim删除空格</a></li><li><a href="#_6-3-5-tolowercase-touppercase大小写转换">6.3.5 toLowerCase/toUpperCase大小写转换</a></li><li><a href="#_6-3-6-match-search模式匹配">6.3.6 match/search模式匹配</a></li><li><a href="#_6-3-7-replace-split替换和分割">6.3.7 replace/split替换和分割</a></li><li><a href="#_6-3-8-localecompare比较">6.3.8 localeCompare比较</a></li><li><a href="#_6-3-9-fromcharcode字符转换">6.3.9 fromCharCode字符转换</a></li></ul></li></ul></li><li><a href="#七、单体内置对象">七、单体内置对象</a><ul><li><a href="#_7-1-global对象">7.1 Global对象</a><ul><li><a href="#_7-1-1-uri编码">7.1.1 URI编码</a></li><li><a href="#_7-1-2-eval-方法">7.1.2 eval()方法</a></li><li><a href="#_7-1-3-global对象的属性">7.1.3 Global对象的属性</a></li><li><a href="#_7-1-3-window对象">7.1.3 window对象</a></li></ul></li><li><a href="#_7-2-math对象">7.2 Math对象</a><ul><li><a href="#_7-2-1-math对象属性">7.2.1 Math对象属性</a></li><li><a href="#_7-2-2-min-max最大最小值">7.2.2 min/max最大最小值</a></li><li><a href="#_7-2-3-ceil-round-floor取整">7.2.3 ceil/round/floor取整</a></li><li><a href="#_7-2-4-random取随机数">7.2.4 random取随机数</a></li><li><a href="#_7-2-5-其他方法">7.2.5 其他方法</a></li></ul></li></ul></li></ul></div><p></p> <p>引用类型是一种用于将 <strong>数据</strong> 和 <strong>功能</strong> 组织在一起的数据结构，也就是说它可以描述一类对象所具有的 <strong>属性</strong> 和 <strong>方法</strong>。那么某个对象（引用类型的值）是引用类型的一个实例。<br> <code>var person = new Object();</code>新对像是使用new操作符后跟一个构造函数来创健的。</p> <h2 id="一、object类型"><a href="#一、object类型" class="header-anchor">#</a> 一、Object类型</h2> <p>Object是ECMAScript中使用最多的一个类型，创建Object实例的方式有两种，一种是之前提到的new操作符后跟Object构造函数，另一种是我们比较推荐使用的对象字面量表示法。<br> <code>var person = new Object();</code>等价于<code>var person = {};</code></p> <ul><li>{}里可以定义属性，如：<code>var person = { age: 24 };</code> 这是一个对象上下文，若属性名是数值，会自动转为String；</li> <li>访问对象属性可使用点表示法也可使用方括号表示法，如：<code>person[&quot;age&quot;]</code>和<code>person.age</code>；方括号表示法用在属性名不规范的情况下，比如含有空格等字符，点表示法就需要属性名尽可能像标识符那样规范。</li></ul> <h2 id="二、array类型"><a href="#二、array类型" class="header-anchor">#</a> 二、Array类型</h2> <p>Array是ECMAScript中除Object最常用的类型，与其他语言不同的是它的每一项可保存 <strong>任何类型</strong> 的数据（位置0存字符串，位置1存数值，位置2存对象等等），并且数组大小是 <strong>动态调整</strong> 的（创建时的长度可随着新增的元素而变长）。</p> <h3 id="_2-1-创建数组"><a href="#_2-1-创建数组" class="header-anchor">#</a> 2.1 创建数组</h3> <p>创建数组有两种：</p> <p><strong>第一种</strong> 自然是 <strong>new操作符后跟Array构造函数</strong>（new可省略）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 入参是数值3，创建长度为3的数组，入参也可以不传</span>
<span class="token keyword">var</span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">&quot;Greg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 入参不是数值，创建了一个包含“Greg”元素的数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>第二种</strong> 是使用 <strong>数组字面量表示法</strong>，<code>var names = [];</code>等价于<code>var names = new Array();</code>，如果有<code>[1, 2, ]</code> 或 <code>[ , , ,]</code>，它可能在不同浏览器里有不同的效果，不推荐省略元素这种写法。</p> <p>关于 <strong>数组长度</strong> (length)，length值比原数组大时，新数组新增出来的位置会使用<code>undefined</code>值填充，而length值比原数组小时，新数组会移除多出来的位置，可以访问多出来的位置但值是undefined</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
colors<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">;</span>    <span class="token comment">// 修改数组第三项的值为&quot;black&quot;</span>
colors<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;brown&quot;</span><span class="token punctuation">;</span>    <span class="token comment">// 新增第四项&quot;brown&quot;</span>
colors<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>      <span class="token comment">// 增长数组，现数组：[&quot;red&quot;, &quot;blue&quot;, &quot;black&quot;, &quot;brown&quot;, undefined, undefined]</span>
colors<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>      <span class="token comment">// 减短数组，现数组：[&quot;red&quot;, &quot;blue&quot;]，如果此时访问colors[4]那返回的是undefined</span>
colors<span class="token punctuation">[</span><span class="token number">99</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">;</span>   <span class="token comment">// 增长数组，现数组：[&quot;red&quot;, &quot;blue&quot;, undefined, ..., undefined, &quot;black&quot;]，长度为99</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-2-isarray检测数组"><a href="#_2-2-isarray检测数组" class="header-anchor">#</a> 2.2 isArray检测数组</h3> <p>只有一个网页或一个全局执行环境是，我们使用<code>instanceof</code>就可以检测对象是不是数组。但是在多个网页或多个全局执行环境时，他们数组的构造函数版本不一样，<strong>导致判断不了</strong>，这时<code>Array.isArray()</code>方法可以确定它是不是数组，<strong>不管它是在哪个全局执行环境中创建的</strong>。</p> <h3 id="_2-3-tostring-valueof等转换方法"><a href="#_2-3-tostring-valueof等转换方法" class="header-anchor">#</a> 2.3 toString/valueOf等转换方法</h3> <p>所有对象都有<code>toString()</code>、<code>toLocaleString()</code>和<code>valueOf()</code>，数组对象也有：</p> <ul><li><code>valueOf()</code>：返回的还是数组本身；</li> <li><code>toString()</code>：把数组每一项的toString()结果以字符串形式拼接起来，用逗号分隔；</li> <li><code>toLocaleString()</code>：把数组每一项的toLocaleString()结果以字符串形式拼接起来，用逗号分隔；</li> <li>除上述3个方法，数组还有<code>join()</code>方法，它其实是数组的toString()方法返回结果把逗号换成了join()里的参数，没有参数则还是逗号，例如：join(&quot;||&quot;)就把<code>,</code>换成<code>||</code>；</li> <li>如果数组的某项是null或undefined的，那么在上述4中方法结果中以空字符串表示</li></ul> <h3 id="_2-4-push-pop尾部添加移除"><a href="#_2-4-push-pop尾部添加移除" class="header-anchor">#</a> 2.4 push/pop尾部添加移除</h3> <p>ECMAScript数组提供了一种类似于栈数据结构特点（后进先出）的方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;brown&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 在数组末尾逐个添加push参数中的项，可以添加多项</span>
<span class="token keyword">var</span> item <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 移除数组末尾最后一项，并将结果返回给item，数组长度会减1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-5-unshift-shift首部添加移除"><a href="#_2-5-unshift-shift首部添加移除" class="header-anchor">#</a> 2.5 unshift/shift首部添加移除</h3> <ol><li><p>ECMAScript数组提供了一种类似于队列数据结构特点（先进先出）的方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> item <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 移除数组末尾第一项，并将结果返回给item，数组长度会减1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>其实还有一个与shift相反的方法<code>unshift()</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> count <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在数组的手段推入两项，返回现数组长度4，其实跟push类似但作用位置不同</span>
<span class="token keyword">var</span> item <span class="token operator">=</span>  colors<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 移除了最尾端的一项，那么数组最后就是[&quot;green&quot;, &quot;black&quot;, &quot;red&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h3 id="_2-6-reverse-sort重排序"><a href="#_2-6-reverse-sort重排序" class="header-anchor">#</a> 2.6 reverse/sort重排序</h3> <p>数组中用来重排序的方法有<code>reverse()</code>和<code>sort()</code>，其中<code>reverse()</code>会 <strong>反转</strong> 数组项的顺序；<br> <code>sort()</code>按升序排列数组项，但它实际上先把每项调用<code>toString()</code>转换成字符串比较再排序的，我们也知道字符串的比较时对应位置字符编码值的比较（一位一位进行比较，只要一位要结果后面的几位就不用看了）。<br>
所以<code>sort()</code>又有一种用法，把一个 <strong>比较函数</strong> 作为sort()的参数，比较函数有2个入参，如果第一个参数位于第二参数之后就返回正数（<strong>大于并返回正数</strong>），而位于之前就返回负数（<strong>小于并返回负数</strong>），相等就返回0，这样排序出来是 <strong>升序</strong> 的，降序的就是 <strong>大于并返回负数</strong>、<strong>小于并返回负数</strong>、等于返回0。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">v1<span class="token punctuation">,</span> v2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">&lt;</span> v2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">&gt;</span> v2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// return v1 - v2; // 前提是v1 v2是数值</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
values<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>compare<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 5, 10, 15]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>如果数组里的类型是引用类型，要对其某个属性进行排序，例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">comparisonFunction</span><span class="token punctuation">(</span><span class="token parameter">propertyName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">object1<span class="token punctuation">,</span> object2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> v1 <span class="token operator">=</span> object1<span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> v2 <span class="token operator">=</span> object2<span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">&lt;</span> v2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">&gt;</span> v2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
values<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">comparisonFunction</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ { age: 1 }, { age: 3 }, { age: 5 }, { age: 10 }, { age: 15 } ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_2-7-concat-slice-splice拼接裁剪"><a href="#_2-7-concat-slice-splice拼接裁剪" class="header-anchor">#</a> 2.7 concat/slice/splice拼接裁剪</h3> <ol><li><p><code>concat()</code>会先创建当前数组的一个 <strong>副本</strong>，然后将接收到的参数添加到这个副本的 <strong>末尾</strong>。接收到的参数可以是 <strong>数组和单个项的混合体</strong>，是数组的话会把数组 <strong>每项</strong> 添到末尾。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> colors2 <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;yellow&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;brown&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]，原数组不变创建了新数组来添加新元素到末尾</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>slice()</code>会先创建当前数组的一个 <strong>副本</strong>，然后会按照参数去对应位置 <strong>截取</strong> 数组。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;purple&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> colors2 <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 可以是一个参数，截取指定位置到末尾的项</span>
<span class="token keyword">var</span> colors3 <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 可以是两个参数，截取[1, 4)位置的项</span>
<span class="token keyword">var</span> colors4 <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 如果参数有负数，会在负数上加上数组长度，也就是[3, 4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;purple&quot;]，原数组不变</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [&quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;purple&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [&quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors4<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [&quot;yellow&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p><code>splice()</code>是操作 <strong>原数组本身</strong>，最后会返回删除的项组成的 <strong>数组</strong>；它有几个参数，第一个参数代表要操作的 <strong>位置</strong>，第二个参数代表从要操作的位置往后 <strong>删除几项</strong>，第三个以及后面的参数代表在删除位置上 <strong>新增的项</strong>。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> removed <span class="token operator">=</span> colors<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;purple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// [&quot;red&quot;, &quot;red&quot;, &quot;purple&quot;, &quot;blue&quot;] 在位置1上删除1个元素，并添加&quot;red&quot;和&quot;purple&quot;)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>removed<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [&quot;green&quot;] 删除的元素组成的数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h3 id="_2-8-indexof-lastindexof搜索项"><a href="#_2-8-indexof-lastindexof搜索项" class="header-anchor">#</a> 2.8 indexOf/lastIndexOf搜索项</h3> <ol><li><code>indexOf(item, start)</code>在数组的 <strong>start位置向右查找item</strong>，查找到以后返回该位置 <strong>索引</strong>，没有找到的话就返回 <strong>-1</strong>，如果没有start参数代表是从位置0开始向右查找的。</li> <li><code>lastIndexOf(item, start)</code>在数组的  <strong>start位置向左查找item</strong>，查找到以后返回该位置 <strong>索引</strong>，没有找到的话就返回 <strong>-1</strong>，如果没有start参数代表是从末尾开始向左查找的。</li></ol> <h3 id="_2-9-every-some-filter-map-foreach迭代"><a href="#_2-9-every-some-filter-map-foreach迭代" class="header-anchor">#</a> 2.9 every/some/filter/map/forEach迭代</h3> <p>ECMAScript5为数组定义了5个迭代方法，每个迭代方法都有两个参数：数组每项将要运行的函数和运行该函数的作用域对象（可选参数）。其中“运行的函数”有3个参数：数组的某项、该项索引、数组对象本身。</p> <ol><li><p><code>every()</code>对数组中的每一项运行给定函数，如果该函数对每一项都返回true，则最后返回true。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> everyResult <span class="token operator">=</span> numer<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>everyResult<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false，要每一项都大于2，最后结果才是true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>some()</code>对数组中的每一项运行给定函数，如果该函数对任意一项返回true，则最后返回true。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> someResult <span class="token operator">=</span> numer<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someResult<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true，只要有一项大于了2，最后就是true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>filter()</code>对数组中的每一项运行给定函数，返回该函数会返回true的项组成的数组。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> filterResult <span class="token operator">=</span> numer<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>filterResult<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 4, 5, 4, 3]，只保留大于2的项，并将这些项组成新数组返回</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>map()</code>对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mapResult <span class="token operator">=</span> numer<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mapResult<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 4, 6, 8, 10, 8, 6, 4, 2]，对每一项都乘以2（可以是其他操作），并组成新数组返回</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>forEach()</code>对数组中的每一项运行给定函数，没有返回值，淡出的遍历数组而去操作某个动作。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> eachResult <span class="token operator">=</span> numer<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 执行某些操作</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h3 id="_2-10-reduce-reduceright归并"><a href="#_2-10-reduce-reduceright归并" class="header-anchor">#</a> 2.10 reduce/reduceRight归并</h3> <p>ECMAScript为数组新增了两个归并方法，都有2个参数：数组每项将要运行的函数和作为归并基础的初始值。这个“运行的函数”有4个参数：前一个值，当前值，当前值的索引，数组对象。</p> <ol><li><p><code>reduce()</code>从数组的第一项开始遍历，然后构建一个最终返回值。<strong>构建树结构目录</strong> (floating-toc.js)比较常用reduce归并方法，因为时候需要与前一项或者说归并值进行比较。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> pre <span class="token operator">+</span> cur<span class="token punctuation">;</span> <span class="token comment">// 这里构建的规则自己定义</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><code>reduceRight()</code>从数组的最后一项往前遍历，然后构建一个最终返回值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> pre <span class="token operator">+</span> cur<span class="token punctuation">;</span> <span class="token comment">// 这里构建的规则自己定义</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <h2 id="三、date类型"><a href="#三、date类型" class="header-anchor">#</a> 三、Date类型</h2> <ul><li>ECMAScript中的Date类型是在早起Java中的java.util.Date类基础上构建的，Date类型使用自UTC（国际协调时间）<strong>1970年1月1日午夜（零时）开始经过的毫秒数</strong> 来保存日期。</li> <li>创建一个日期对象，使用new操作符和Date构造函数：<code>var now = new Date();</code>新创建的对象 <strong>自动获得当前日期和时间</strong>，Date构造函数可接受参数，参数一般是 <strong>毫秒数</strong>。</li> <li>在WEB应用中，<code>new Date(xxx)</code>一般使用在时间显示组件中，这些组件是前端框架已经封装好了的，所以在业务代码中极少见到这种<code>new Date(xxx)</code>，只需把毫秒数传给组件即可。</li> <li>Date类型的<code>toLocaleString()</code>会按照与浏览器设置的地区相适应的格式返回日期和时间。而<code>toString()</code>会返回带有时区信息的日期和时间，<code>valueOf()</code>会返回日期的毫秒表示。三种多用于调试。</li> <li>再介绍Date类型的日期/时间组件方法，注：UTC日期指0时区（没有时区偏差）的日期值。</li></ul> <table><thead><tr><th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>getTime()</td> <td>返回表示日期的毫秒数；与valueOf()方法返回的值相同</td></tr> <tr><td>setTime(毫秒)</td> <td>以毫秒数设置日期，会改变整个日期</td></tr> <tr><td>getFullYear()</td> <td>取得4位数的年份（如2007而非07）</td></tr> <tr><td>getUTCFullYear()</td> <td>返回UTC日期的4位数年份</td></tr> <tr><td>setFullYear(年)</td> <td>设置日期的年份，传入的年份值必须是4位数字（如2007而非07）</td></tr> <tr><td>setUTCFullYear(年)</td> <td>设置UTC日期的年份，传入的年份值必须是4位数字（如2007而非07）</td></tr> <tr><td>getMonth()</td> <td>返回日期中的月份，其中0表示一月，11表示十二月</td></tr> <tr><td>getUTCMonth()</td> <td>返回UTC日期中的月份，其中0表示一月，11表示十二月</td></tr> <tr><td>setMonth(月)</td> <td>设置日期的月份，传入的月份值必须大于0，超过11则增加年份</td></tr> <tr><td>setUTCMonth(月)</td> <td>设置UTC日期的月份，传入的月份值必须大于0，超过11则增加年份</td></tr> <tr><td>getDate()</td> <td>返回日期月份中的天数（1到31）</td></tr> <tr><td>getUTCDate()</td> <td>返回UTC日期月份中的天数（1到31）</td></tr> <tr><td>setDate(日)</td> <td>设置日期月份中的天数，如果传入的值超过了该月中应有天数，则增加月份</td></tr> <tr><td>setUTCDate(日)</td> <td>设置UTC日期月份中的天数，如果传入的值超过了该月中应有天数，则增加月份</td></tr> <tr><td>getDay()</td> <td>返回日期中星期的星期几（其中0表示星期日，6表示星期6）</td></tr> <tr><td>getUTCDay()</td> <td>返回UTC日期中星期的星期几（其中0表示星期日，6表示星期6）</td></tr> <tr><td>getHours()</td> <td>返回日期中的小时数（0到23）</td></tr> <tr><td>getUTCHours()</td> <td>返回UTC日期中的小时数（0到23）</td></tr> <tr><td>setHours(时)</td> <td>设置日期中的小时数，传入的值超过了23则增加月份中的天数</td></tr> <tr><td>setUTCHours(时)</td> <td>设置UTC日期中的小时数，传入的值超过了23则增加月份中的天数</td></tr> <tr><td>getMinutes()</td> <td>返回日期中的分钟数（0到59）</td></tr> <tr><td>getUTCMinutes()</td> <td>返回UTC日期中的分钟数（0到59）</td></tr> <tr><td>setMinutes(分)</td> <td>设置日期中的分钟数，传入的值超过59则增加小时数</td></tr> <tr><td>setUTCMinutes(分)</td> <td>返回UTC日期中的分钟数，传入的值超过59则增加小时数</td></tr> <tr><td>getseconds()</td> <td>返回日期中的秒数（0到59）</td></tr> <tr><td>getUTCseconds()</td> <td>返回UTC日期中的秒数（0到59）</td></tr> <tr><td>setseconds(秒)</td> <td>设置日期中的秒数，传入的值超过59则增加分钟数</td></tr> <tr><td>setUTCseconds(秒)</td> <td>返回UTC日期中的秒数，传入的值超过59则增加分钟数</td></tr> <tr><td>getMilliseconds()</td> <td>返回日期中的毫秒数</td></tr> <tr><td>getUTCMilliseconds()</td> <td>返回UTC日期中的毫秒数</td></tr> <tr><td>setMilliseconds(毫秒)</td> <td>设置日期中的毫秒数</td></tr> <tr><td>setUTCMilliseconds(毫秒)</td> <td>设置UTC日期中的毫秒数</td></tr> <tr><td>setTimezoneOffest()</td> <td>返回本地时间与UTC时间相差的分钟数</td></tr></tbody></table> <h2 id="四、regexp类型"><a href="#四、regexp类型" class="header-anchor">#</a> 四、RegExp类型</h2> <p>ECMAScript通过RegExp类型来支持正则表达式，<code>var exp = /pattern/flags;</code>模式（pattern）部分可以是任何简单或复杂的 <strong>表达式</strong>（可以包含 <strong>字符类、限定符、分组、向前查找以及反向引用</strong>）。而flags可以有对个，用以标明正则表达式的 <strong>行为</strong>。</p> <p>正则表达式的匹配模式支持3个标志：</p> <ul><li><code>g</code>：表示全局（global）模式，在发现第一个匹配项时不会立即停止，会继续往后匹配所有。</li> <li><code>i</code>：表示不区分大小写（case-insensitive）模式，确定匹配项时忽略模式与字符串的大小写。</li> <li><code>m</code>：表示多行（multiline）模式，在到大一行文本末尾时，还会继续查找下一行。</li></ul> <p>元字符需要用<code>\</code>转义：<code>([{\^$|)?*+.]}</code></p> <p>创建正则表达式除了用字面量形式以外，还可以用RegExp构造函数，例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> pattern1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[bc]at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>   <span class="token comment">// 匹配第一个“bat”或“cat”，不区分大小写</span>
<span class="token keyword">var</span> pattern2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;[bc]at&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 与pattern1相同</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这种形式的不同点：</p> <ul><li>字面量形式里的元字符对应到构造函数的字符串里要 <strong>再转义一遍</strong>，例如字面量<code>/\w\\hello\\123/</code>对应构造函数字符串<code>&quot;\\w\\\\hello\\\\123&quot;</code></li> <li>在ECMAScript3时，正则表达式字面量始终会共享同一个RegExp实例，而构造函数创建的每一个对象都是一个新RegExp实例，例如在for循环体中操作两种情形时的正则表达式，结果会大不一样，但在 <strong>ECMAScript5</strong>，这两种方式每次 <strong>都创建新的RegExp实例</strong></li></ul> <h3 id="_4-1-regexp实例属性"><a href="#_4-1-regexp实例属性" class="header-anchor">#</a> 4.1 RegExp实例属性</h3> <p>RegExp的每个实例都具有下列属性：</p> <ul><li><code>global</code>：布尔值，表示是否设置了<code>g</code>标志；</li> <li><code>ignoreCase</code>：布尔值，表示是否设置了<code>i</code>标志；</li> <li><code>lastIndex</code>：整数，表示开始搜索下一个匹配项的字符位置，从0算起；</li> <li><code>multiline</code>：布尔值，表示是否设置了<code>m</code>标志；</li> <li><code>source</code>：正则表达式的字符串表示，按照字面量形式返回（构造函数中的字符串去掉元字符的<code>\</code>符号）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;\\[bc\\]at&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>global<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>ignoreCase<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>multiline<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// &quot;\[bc\]at&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-2-regexp实例方法"><a href="#_4-2-regexp实例方法" class="header-anchor">#</a> 4.2 RegExp实例方法</h3> <ol><li><p><code>exec()</code>专为捕获组设计，exec()接受一个参数（要应用的字符串），返回与捕获组相关的数组（没有匹配项则返回null），这个返回值还有两个额外属性：<code>input</code>和<code>index</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;cat, bat, sat, fat&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> matches <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 0，表示匹配项在字符串中的位置，而input就是text值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// cat，第一个捕获组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3表示开始搜索下一个匹配项的字符位置</span>
matches <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 5，逗号后有一个空格是4，b才是5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// bat</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在设置全局标志的情况下，每次调用exec()则都会在字符串中继续查找新匹配项，而没设置全局标志则会一直灰灰第一个匹配项不早醒的匹配项。</p></li> <li><p><code>test()</code>判断目标字符串与某个模式是否匹配</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;000-00-000&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3}-\d{2}-\d{4}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>RegExp实例继承的toLocaleString()和toString()方法都会返回正则表达式的字面量（是构造函数创建的正则表达式也如此）。<code>valueOf()</code>方法返回正则表达式本身。</p></li></ol> <h3 id="_4-3-regexp构造函数属性"><a href="#_4-3-regexp构造函数属性" class="header-anchor">#</a> 4.3 RegExp构造函数属性</h3> <p>在其他语言被看作静态属性。适用于作用域中的所有正则表达式，并且基于所执行的最近一次正则标的是操作而变化。</p> <table><thead><tr><th>长属性名</th> <th>短属性名</th> <th>说明</th></tr></thead> <tbody><tr><td>input</td> <td>$_</td> <td>最近一次要匹配的字符串</td></tr> <tr><td>lastMatch</td> <td>$&amp;</td> <td>最近一次的匹配项</td></tr> <tr><td>lastParen</td> <td>$+</td> <td>最近一次匹配的捕获组</td></tr> <tr><td>leftContext</td> <td>$`</td> <td>input字符串中lastMatch之前的文本</td></tr> <tr><td>mutiline</td> <td>$*</td> <td>布尔值，表示是否所有表达式都使用多行模式</td></tr> <tr><td>rightContext</td> <td>$'</td> <td>input字符串中lastMatch之后的文本</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;this has been a short summer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(.)hort</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$_<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// &quot;this has been a short summer&quot;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token string">&quot;$`&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot;this has been a &quot;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token string">&quot;$'&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot; summer&quot;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token string">&quot;$&amp;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot;short&quot;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token string">&quot;$+&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot;s&quot;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token string">&quot;$*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>除了上面这些属性还有多达9个用于存储捕获组的构造函数属性：<code>$1</code>、<code>$2</code>、<code>$3</code> ... <code>$9</code>，例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;this has been a short summer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(..)or(.)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot;sh&quot;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$2<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot;t&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-4-模式的局限性"><a href="#_4-4-模式的局限性" class="header-anchor">#</a> 4.4 模式的局限性</h3> <p>缺少某些语言所支持的高级正则表达式特性：</p> <ul><li>匹配字符串开始和结尾的<code>\A</code>和<code>\2</code>锚（但支持匹配字符串的开始用<code>^</code>结尾用<code>$</code>）</li> <li>向后查找（但完全支持向前查找）</li> <li>并集和交集类</li> <li>原子组</li> <li>Unicide支持（单个字符除外，如<code>\uFFFF</code>）</li> <li>命名的捕获组</li> <li>s（单行）和x（无间隔）匹配模式</li> <li>条件匹配</li> <li>正则表达式注释</li></ul> <h2 id="五、function类型"><a href="#五、function类型" class="header-anchor">#</a> 五、Function类型</h2> <p>每个函数都是Function类型的实例，而且都与其他应用类型一样具有属性和方法。函数名实际上是一个指向函数对象的指针，不会与某个函数绑定。</p> <p>函数有3种方式定义：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 函数声明</span>
<span class="token keyword">function</span> <span class="token function">sum1</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 函数表达式</span>
<span class="token keyword">var</span> <span class="token function-variable function">sum2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 构造函数</span>
<span class="token keyword">var</span> sum3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;num1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;num2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;return num1 + num2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>第一种函数声明和第二种函数表达式几乎相差无几，而第三种Function构造函数我们不推荐使用，因为最后一个参数是动态代码字符串。</p> <h3 id="_5-1-函数声明-函数表达式-构造函数的区别"><a href="#_5-1-函数声明-函数表达式-构造函数的区别" class="header-anchor">#</a> 5.1 函数声明/函数表达式/构造函数的区别</h3> <ol><li><p>函数声明：js整体一边编译一边执行，但在一个代码段里，是 <strong>先编译后执行</strong>。比如下面这段代码里，<strong>编译器先走</strong>，走到了<code>function sum(num1, num2)</code>时，编译器会去 <strong>变量对象</strong> 里查找<code>sum</code>，发现没有这个变量，就声明了一个名为<code>sum</code>并且类型是 <strong>Function</strong> 的变量（因为function是 <strong>声明的关键字</strong>，所以它的类型是Function），并放在了 <strong>变量对象</strong> 里；<strong>编译完后</strong> 引擎开始执行代码，因为<code>function sum(num1, num2)</code>在编译器 <strong>已经提升了</strong>（代码段里先编译后执行） 所以会提前执行，给sum指引一个Function实例化对象，然后走到<code>sum()</code>去执行这个函数。也就是说不管<code>sum()</code>是在 <strong>函数声明前还是声明后执行</strong> 都不会报锗，这样的过程叫 <strong>函数声明提升</strong>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">// 执行代码，编译期会忽略这里</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 编译到这，声明提升了</span>
    <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*****************等价于******************/</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 编译到这，声明提升了</span>
    <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>函数表达式：编译器走到<code>var sum</code>时，只知道sum是个普通变量，不知道它在 <strong>执行期</strong> 会接收Function的实例化对象，所以它没有 <strong>函数声明提升</strong>（只是普通声明）。当引擎执行到<code>sum = function (num1, num2)</code>时，会把新创建的函数对象让sum指引着，然后继续去执行<code>sum()</code>，正常调用函数。如果<code>sum()</code>在函数表达式之前，那就会报错，因为sum没有函数声明提升，<strong>必须等Function实例赋值给sum后才能去调用这个函数</strong>，这也是函数表达式与函数声明的 <strong>唯一区别</strong>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*****************下面会报错***************/</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>Function构造函数：与函数表达式有些类似，编译器走到<code>var sum</code>时，只知道sum是个普通变量，不知道它在 <strong>执行期</strong> 会接收Function的实例化对象；但不同的是，“函数表达式”在调用时会 <strong>先编译</strong> 生成 <strong>函数的执行环境</strong>，编译器认为num1、num2是变量，return是个执行语句，而“Function构造函数”虽说也生成函数的执行环境，编译器也认为num1、num2是变量，<strong>但是第三个参数是个字符串</strong>，在函数的 <strong>执行期</strong> 才把第三个参数这个字符串解析编译出来，再执行这个代码（函数表达式却是直接执行return）。总的来说就是“Function构造函数”在执行期比“函数表达式”多一步 <strong>动态代码字符串解析编译</strong>，极耗性能，这也是我们 <strong>不推荐使用“Function构造函数”的原因</strong>，不说性能就字符串里写代码的稳定性就不好。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;num1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;num2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;return num1 + num2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h3 id="_5-2-没有重载"><a href="#_5-2-没有重载" class="header-anchor">#</a> 5.2 没有重载</h3> <ul><li><strong>重写</strong> 子类覆盖父类的方法（返回值和形参都不能改变，方法体改变了，也就是核心变了），在js里重写是可以的。</li> <li><strong>重载</strong>：在同一个类里（执行环境），方法名相同而形参列表和方法体不一样的函数叫重载，这在js里是不存在的。</li> <li>因为js里使用var和function这样的关键字来声明 <strong>同名变量</strong> 时，都会以最后一个声明为准，它会覆盖之前所有 <strong>同名</strong> 的声明；js里的同名函数的声明就是重载的写法，因为在同一个执行环境里，但由于同名的会被覆盖，那么js里没有函数重载这一说法。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">addSomeNumber</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">addSomeNumber</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">addSomeNumber</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// addSomeNumber被定义了2次，后定义的会覆盖先定义的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5-3-作为值的函数"><a href="#_5-3-作为值的函数" class="header-anchor">#</a> 5.3 作为值的函数</h3> <p>函数名是一个指针变量，那么函数对象可以作为一个值来使用，比如作为参数和返回值。</p> <h3 id="_5-4-函数内部属性-arguments-this"><a href="#_5-4-函数内部属性-arguments-this" class="header-anchor">#</a> 5.4 函数内部属性(arguments/this)</h3> <p>函数内部有两个特殊对象：<code>arguments</code>和<code>this</code>，在之前的<a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/1.基础语法.html#函数">1.基础语法#函数</a>里有介绍arguments，在<a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/2.变量、作用域和内存问题.html#执行环境及作用域">2.变量、作用域和内存问题#执行环境及作用域</a>里介绍过this。</p> <p>arguments有一个<code>callee</code>属性，是一个指向拥有当前arguments的函数对象的指针。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num <span class="token operator">*</span> arguments<span class="token punctuation">.</span><span class="token function">callee</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是 num * factorial(num - 1)的解耦形式</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>函数内部还有一个<code>caller</code>属性（ECMAScript5规范的），这个属性保存着 <strong>调用当前函数</strong> 的 <strong>函数</strong> 的 <strong>引用</strong>，如果实在全局作用域中调用的当前函数，caller则为null。可以结合arguments的callee指代当前函数来使用，例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>caller<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// outer函数的原码</span>
<span class="token punctuation">}</span>
<span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>注意：<strong>严格模式下，访问<code>arguments.callee</code>会导致错误，也不能为函数的caller属性赋值。</strong></p> <h3 id="_5-5-函数属性和方法-apply-call-bind"><a href="#_5-5-函数属性和方法-apply-call-bind" class="header-anchor">#</a> 5.5 函数属性和方法(apply/call/bind)</h3> <ol><li><p>函数都有两个属性，可在内部和外部使用：<code>length</code>和<code>prototype</code>。通过函数名加上<code>.</code>来使用。</p> <ul><li><code>length</code>属性表示函数 <strong>希望接收的命名参数的个数，并不是指实际参数个数</strong>。</li> <li><code>prototype</code>属性是 <strong>保存</strong> 它们 <strong>所有实例方法</strong> 的真正存在。</li></ul></li> <li><p>函数都有两个非继承而来的方法：<code>apply()</code>和<code>call()</code>。通过函数名加上<code>.</code>来使用。</p> <ul><li>这两个方法是用来设置当前函数的<code>this</code>对象的值，改变函数所处的执行环境</li> <li><code>apply()</code>和<code>call()</code>有多个入参时，第一个参数将作为 <strong>新执行环境</strong>；第二个参数apply是使用 <strong>形参的数组形式</strong>，而call是 <strong>形参本身的形式</strong>。<code>apply()</code>和<code>call()</code>只有一个参数时，自然是把这个参数设置为当前函数的this，也就是少了传参。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">+</span> c <span class="token operator">+</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 14</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>ECMAScript5定义了一个<code>bind()</code>，与<code>apply()</code>和<code>call()</code>类似，除了把参数设置为当前函数的this值以外，<code>bind()</code>还会创建一个函数的实例，<code>bind()</code>的传参与call一样是 <strong>形参本身的形式</strong>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> objectSayColor <span class="token operator">=</span> <span class="token function">sayColor</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不用立即执行，到后面想执行时使用实例对象执行</span>
<span class="token function">objectSayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;blue&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>除了上述方法，函数还有几层的<code>toLacaleString()</code>、<code>toString()</code>、<code>valueOf()</code>，都是用来返回 <strong>函数源码</strong> 的，返回的格式因浏览器而异。</p></li></ol> <h2 id="六、基本包装类型"><a href="#六、基本包装类型" class="header-anchor">#</a> 六、基本包装类型</h2> <p>ECMAScript有6种数据类型，其中<code>Undefined</code>、<code>Null</code>、<code>Boolean</code>、<code>Number</code>、<code>String</code>是简单（基本）类型，剩下的<code>Object</code>是一种复杂数据类型。<br>
在操作布尔值、数值和字符串时，后台会隐式创建一个对应的 <strong>基本包装类型</strong> 的对象，从而提供一些操作方法（实例上的方法），操作完会立即销毁这个对象，若要重新调用这个对象其实又隐式创建了 <strong>基本包装类型</strong> 的对象。<br>
上述是操作布尔值、数值和字符串，即基本包装类型有三种：<code>Boolean</code>、<code>Number</code>、<code>String</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token string">&quot;some text&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 这里隐式创建String包装类型，相当于var s1 = new String(&quot;some text&quot;);</span>
s1<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined，上一行代码执行完，s1对应基本包装类型的对象就销毁了，这里使用时是重现隐式创建了，所以color属性就没有了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 转型函数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot;number&quot;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 构造函数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// &quot;object&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面这个例子也说明了三种数据基本类型和对应基本包装类型的区别了，实际上我们不建议显示地创建基本包装类型的对象，容易让人分不清是在处理基本类型还是引用类型（基本包装类型是引用类型）。</p> <h3 id="_6-1-boolean包装类型"><a href="#_6-1-boolean包装类型" class="header-anchor">#</a> 6.1 Boolean包装类型</h3> <p><strong>Boolean包装类型</strong> 是布尔值对应的 <strong>引用类型</strong>，创建对象调用Boolean构造函数时传入true或false，在使用这个对象时很容易造成误解，所以 <strong>不推荐显式构造Boolean包装类型</strong>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> falseOject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 显式的使用了Boolean包装类型</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> falseObject <span class="token operator">&amp;&amp;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       <span class="token comment">// 此时falseObject是个对象，隐式的调用了Boolean(falseObject)，结果为true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>跟其他应用类型一样，继承了valueOf()、toString()、toLocaleString()方法，可以使用<code>instanceof</code>来区分布尔的基本类型和包装类型。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> falseOject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> falseValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>falseOject <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>falseValue <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_6-2-number包装类型"><a href="#_6-2-number包装类型" class="header-anchor">#</a> 6.2 Number包装类型</h3> <p>Number包装类型是数值对应的引用类型，创建对象调用Number构造函数时传入相应的数值，与Boolean包装类型的对象一样在使用时容易造成误解不推荐显式使用。</p> <p>同样的，Number包装类型也继承有valueOf()、toString()、toLocaleString()方法；它有还提供了一些将数值格式转为字符串的方法：</p> <ul><li><code>toFixed()</code>：按照指定的 <strong>小数位</strong> 返回数值的字符串表示；</li> <li><code>toExponential()</code>：返回以指数表示法的数值的字符串形式；</li> <li><code>toPrecision()</code>：按照指定位数以合适的形式（指数或小数）返回数值的字符串形式。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// &quot;1e+2&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// &quot;99&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// &quot;99.0&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>toFixed()</code>和<code>toExponential()</code>的入参都是指定小数位数，而<code>toPrecision()</code>的入参是指定的所有数字位数（整数位加上小数位，但不包括指数位）。</p> <p><code>typeof</code>和<code>instanceof</code>可区分Number的基本类型和包装类型。</p> <h3 id="_6-3-string包装类型"><a href="#_6-3-string包装类型" class="header-anchor">#</a> 6.3 String包装类型</h3> <p>String包装类型是字符串对应的引用类型，创建对象调用String构造函数时传入相应的字符串。</p> <p>每个实例都有<code>length</code>属性，表示字符串包含字符的 <strong>个数</strong>，即使是 <strong>双字节字符串也算一个字符</strong>。</p> <p>继承有valueOf()、toString()、toLocaleString()方法，都返回对象所表示的基本字符串的值。</p> <h4 id="_6-3-1-charat-charcodeat字符"><a href="#_6-3-1-charat-charcodeat字符" class="header-anchor">#</a> 6.3.1 charAt/charCodeAt字符</h4> <ul><li><code>charAt()</code>返回给定位置的那个字符；</li> <li><code>charCodeAt()</code>返回给定位置的那个字符的字符编码；</li> <li>ECMAScript5还定义方括号加索引的方式来访问字符串中特定位置的字符，例：<code>stringValue[0]</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stringValue <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// &quot;e&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 101  小写字母e的字符编码</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_6-3-2-concat-slice-substr-substring拼接裁剪"><a href="#_6-3-2-concat-slice-substr-substring拼接裁剪" class="header-anchor">#</a> 6.3.2 concat/slice/substr/substring拼接裁剪</h4> <ul><li><p><code>concat()</code>先创建当前字符串的一个副本，然后将接收到的一个或多个参数拼接到这个副本的末尾。其实字符串拼接更多的还是使用<code>+</code>操作符。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stringValue <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> stringValue<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot; world&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;hello world!&quot;  注意此时stringValue的值还是&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>slice(start, end)</code>是截取字符串；如果参数end不存在，则会从start位置截取至末尾，否则从[start, end)截取字符串；如果start和end中任意一个有负数，则会在负数基础上加上字符串的长度进行截取。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stringValue <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// -3+11=8，从位置8截取至末尾，&quot;rld&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -4+11=7，从[3, 7)截取，&quot;lo wo&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>substr(start, n)</code>也是截取字符串；如果参数end不存在，则会从start位置截取至末尾，否则从start位置截取n长度的字符串；如果start为负数，那在负数基础上加上字符串的长度，但是如果n为负数意味着不截（截取0个）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stringValue <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// -3+11=8，从位置8截取至末尾，&quot;rld&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -4变为0，不截取，&quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>substring(start, end)</code>也是截取字符串；如果参数end不存在，则会从start位置截取至末尾，否则从[start, end)截取字符串；如果start和end中任意一个有负数，就将这个负数变为0；如果都是非负数，并且end比start小，那实际上就是从[end, start)截取字符串。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stringValue <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// -3变为0，从位置0截取至末尾，&quot;hello world&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -4变为0，0小于3，从[0, 3)截取，&quot;hel&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h4 id="_6-3-3-indexof-lastindexof搜索字符"><a href="#_6-3-3-indexof-lastindexof搜索字符" class="header-anchor">#</a> 6.3.3 indexOf/lastIndexOf搜索字符</h4> <ul><li><code>indexOf(s, index)</code>如果参数index不存在，会从0位置往 <strong>右</strong> 搜索字符s，参数index存在就会从位置idnex往 <strong>右</strong> 搜索字符s；搜索到的话会返回字符s的索引值，否则返回-1。</li> <li><code>lastIndexOf(s, index)</code>如果参数index不存在，会从0位置往 <strong>左</strong> 搜索字符s，参数index存在就会从位置idnex往 <strong>左</strong> 搜索字符s；搜索到的话会返回字符s的索引值，否则返回-1。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stringValue <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 7</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_6-3-4-trim删除空格"><a href="#_6-3-4-trim删除空格" class="header-anchor">#</a> 6.3.4 trim删除空格</h4> <ul><li>ECMAScript5为字符串定义了一个<code>trim()</code>方法，它会先创建一个字符串副本，删除这个副本 <strong>前置</strong> 以及 <strong>后缀</strong> 的所有空格。</li> <li>有些浏览器还支持非标准的<code>trimLeft()</code>和<code>trimRight()</code>方法，单纯只删除 <strong>前置或后缀</strong> 的空格</li></ul> <h4 id="_6-3-5-tolowercase-touppercase大小写转换"><a href="#_6-3-5-tolowercase-touppercase大小写转换" class="header-anchor">#</a> 6.3.5 toLowerCase/toUpperCase大小写转换</h4> <ul><li><code>toLowerCase()</code>将字符串全转为小写；</li> <li><code>toUpperCase()</code>将字符串全转为大写；</li> <li>当不知道代码在哪种语言（哪个地区）环境中运行，可以采用<code>toLocaleLowerCase()</code>和<code>toLocaleUpperCase()</code>。</li></ul> <h4 id="_6-3-6-match-search模式匹配"><a href="#_6-3-6-match-search模式匹配" class="header-anchor">#</a> 6.3.6 match/search模式匹配</h4> <ul><li><p><code>match()</code>与RegExp对象调用<code>exec()</code>效果一样，也只是入参和使用对象对调了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;cat, bat, sat, fat&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.at</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> matches <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 与pattern.exec(text)效果一样</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// &quot;cat&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">,</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><code>search()</code>只有一个入参，该入参是正则表达式；它始终会从字符串开头向后查找正则表达式所匹配到的 <strong>第一个匹配项的索引</strong>，没查到会返回-1。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;cat, bat, sat, fat&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pos <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">at</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h4 id="_6-3-7-replace-split替换和分割"><a href="#_6-3-7-replace-split替换和分割" class="header-anchor">#</a> 6.3.7 replace/split替换和分割</h4> <p><code>replace()</code>接受两个参数，第一个参数是 <strong>RegExp对象或字符串</strong>，第二个参数是 <strong>字符串或函数</strong>，返回替换后的新字符串，但不影响原字符串（事先创建了字符串 <strong>副本</strong>）。</p> <ol><li><p>当第一个参数是字符串时，只替换匹配到的 <strong>第一项</strong>；当第一个参数是正则表达式并且指定 <strong>全局标志(g)</strong> 时，才会替换 <strong>所有</strong> 能匹配到的项。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;cat, bat, sat, fat&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;at&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ond&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// &quot;cond, bat, sat, fat&quot;</span>
result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;ond&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// &quot;cond, bond, sond, fond&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>当第一个参数是正则表达式，第二个参数是字符串时，这个字符串里可使用一些 <strong>特殊字符序列</strong>，将正则表达式匹配到的值，插入到第二个参数字符串的特殊字符序列所在的位置。</p> <table><thead><tr><th>字符序列</th> <th>替换文本</th></tr></thead> <tbody><tr><td>$$</td> <td>$</td></tr> <tr><td>$&amp;</td> <td>匹配整个模式的子字符串；与RegExp.lastMatch的值相同</td></tr> <tr><td>$'</td> <td>匹配的子字符串之前的子字符串；与RegExp.leftContext的值相同</td></tr> <tr><td>$`</td> <td>匹配的子字符串之后的子字符串；与RegExp.rightContext的值相同</td></tr> <tr><td>$n</td> <td>匹配第n个捕获组的子字符串，其中n等于0到9</td></tr> <tr><td>$nn</td> <td>匹配第nn个捕获组的子字符串，其中nn等于01到99</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">&quot;cat, bat, sat, fat&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(.at)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;word[$1]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 要是/(.at)/g，不能是/.at/g</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;word[cat], word[bat], word[sat], word[fat]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>当第二个参数是一个函数时，在只有一个匹配项情况下，会向这个函数传递3个参数：<strong>模式的匹配项、模式匹配项在字符串中的位置、元素字符串</strong>。在正则表达式中定义多个捕获组的情况下，传递给函数的参数依次是模式的匹配项、第一个捕获组的匹配项、第二个捕获组的匹配项，...，但最后两个参数仍然分别是模式匹配项在字符串中的位置和原始字符串。这个函数应该返回一个字符串，表示应该被替换的匹配项。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">function</span> <span class="token function">htmlEscape</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[&lt;&gt;&quot;&amp;]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> originalText</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">switch</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">case</span> <span class="token string">&quot;&lt;&quot;</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> <span class="token string">&quot;&amp;lt;&quot;</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;&gt;&quot;</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> <span class="token string">&quot;&amp;gt;&quot;</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;&amp;&quot;</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> <span class="token string">&quot;&amp;amp;&quot;</span><span class="token punctuation">;</span>
             <span class="token keyword">case</span> <span class="token string">&quot;\&quot;&quot;</span><span class="token operator">:</span>
                 <span class="token keyword">return</span> <span class="token string">&quot;&amp;quot;&quot;</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// &amp;lt;p class=&amp;quot;greeting&amp;quot;&amp;gt;Hello world!&amp;lt;/p&amp;gt;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">htmlEscape</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p class=\&quot;greeting\&quot;&gt;Hello world!&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ol> <p><code>split()</code>基于指定 <strong>分隔符</strong> 将一个字符串分割成多个 <strong>子字符串</strong>，并把结果存放在一个 <strong>数组</strong> 里。分隔符可以是字符串也可以是一个 <strong>RegExp对象</strong>，当然也可以接受可选的第二参数，来限定数组的大小。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> colorText <span class="token operator">=</span> <span class="token string">&quot;red, blue, green, yellow&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> colors1 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;yellow&quot;]</span>
<span class="token keyword">var</span> colors2 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// [&quot;red&quot;, &quot;blue&quot;]</span>
<span class="token keyword">var</span> colors3 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\,]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [&quot;&quot;, &quot;,&quot;, &quot;,&quot;, &quot;,&quot;, &quot;&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_6-3-8-localecompare比较"><a href="#_6-3-8-localecompare比较" class="header-anchor">#</a> 6.3.8 localeCompare比较</h4> <p><code>localeCompare()</code>由于比较两个字符串，返回值情况如下：</p> <ul><li>如果参数字符串在字母表中排在调用字符串之前（一位位进行比较），则返回一个正数（大多数是1）；</li> <li>如果参数字符串等于调用字符串，则返回0；</li> <li>如果参数字符串在字母表中排在调用字符串之后，则返回一个负数（大多数是-1）。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> stringValue <span class="token operator">=</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token string">&quot;brick&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token string">&quot;yellow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token string">&quot;zoo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// -1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_6-3-9-fromcharcode字符转换"><a href="#_6-3-9-fromcharcode字符转换" class="header-anchor">#</a> 6.3.9 fromCharCode字符转换</h4> <p><code>fromCharCode()</code>是String构造函数本身的一个静态方法，接收一个或多个字符编码，将它们转换成一个字符串，可以看做<code>charCodeAt()</code>的反向操作。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">104</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="七、单体内置对象"><a href="#七、单体内置对象" class="header-anchor">#</a> 七、单体内置对象</h2> <p>内置对象：由ECMAScript提供 <strong>不依赖宿主环境</strong> 的对象，在代码执行前就已经存在。<code>Object</code>、<code>Array</code>和<code>Object</code>是之前介绍过的内置对象，这一节主要讲两个 <strong>单体内置对象</strong>：<code>Global</code>和<code>Math</code>。</p> <h3 id="_7-1-global对象"><a href="#_7-1-global对象" class="header-anchor">#</a> 7.1 Global对象</h3> <p>ECMAScript中的Global对象像一个兜底儿对象，即 <strong>不属于任何其他对象的属性和方法最终都是它的属性和方法</strong> 。比如在全局环境中定义的属性和函数都是Global对象的属性，诸如<code>isNaN()</code>、<code>isFinite()</code>、<code>parseInt()</code>、<code>parseFloat()</code>都是Global对象的方法。</p> <h4 id="_7-1-1-uri编码"><a href="#_7-1-1-uri编码" class="header-anchor">#</a> 7.1.1 URI编码</h4> <ul><li><p>Global对象的<code>encodeURI()</code>和<code>encodeURIComponent()</code>这两个方法可以对URI进行特殊的UTF-8编码，使得浏览器能够接受和理解。</p></li> <li><p><code>encodeURIComponent()</code>会对 <strong>所有非字母、非数字的字符</strong> 进行编码；<code>encodeURI()</code>只对非字母、非数字字符中类似于空格这样 <strong>无效字符</strong> 进行编码，而对URI中特殊字符比如 <strong>冒号、正斜杠、问号和井字号</strong> 就不会编码；<code>encodeURIComponent()</code>要用得更多一些。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> uri <span class="token operator">=</span> <span class="token string">&quot;http://www.wrox.com/illegal value.htm#start&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;http://www.wrox.com/illegal%20value.htm#start&quot;;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;http%3A%2F%2Fwww.wrox.com%2Fillegal%20value.htm%23start&quot;;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><code>decodeURI()</code>和<code>decodeURIComponent()</code>是对应<code>encodeURI()</code>和<code>encodeURIComponent()</code>的反向解码方法。</p></li></ul> <h4 id="_7-1-2-eval-方法"><a href="#_7-1-2-eval-方法" class="header-anchor">#</a> 7.1.2 eval()方法</h4> <p><code>eval()</code>在之前就提到过，它在执行期可能会改变编译期的作用域，从而导致性能问题，它还有一个问题是作为动态代码生成的一个方法很可能造成代码注入等安全问题。</p> <h4 id="_7-1-3-global对象的属性"><a href="#_7-1-3-global对象的属性" class="header-anchor">#</a> 7.1.3 Global对象的属性</h4> <table><thead><tr><th>属性</th> <th>说明</th> <th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>Undefined</td> <td>特殊值Undefined</td> <td>Date</td> <td>构造函数Date</td></tr> <tr><td>NaN</td> <td>特殊值NaN</td> <td>RegExp</td> <td>构造函数RegExp</td></tr> <tr><td>Infinity</td> <td>特殊值Infinity</td> <td>Error</td> <td>构造函数Error</td></tr> <tr><td>Object</td> <td>构造函数Object</td> <td>EvalError</td> <td>构造函数EvalError</td></tr> <tr><td>Array</td> <td>构造函数Array</td> <td>RangeError</td> <td>构造函数RangeError</td></tr> <tr><td>Function</td> <td>构造函数Function</td> <td>ReferenceError</td> <td>构造函数ReferenceError</td></tr> <tr><td>Boolean</td> <td>构造函数Boolean</td> <td>SyntaxError</td> <td>构造函数SyntaxError</td></tr> <tr><td>String</td> <td>构造函数String</td> <td>TypeError</td> <td>构造函数TypeError</td></tr> <tr><td>Number</td> <td>构造函数Number</td> <td>URIError</td> <td>构造函数URIError</td></tr></tbody></table> <h4 id="_7-1-3-window对象"><a href="#_7-1-3-window对象" class="header-anchor">#</a> 7.1.3 window对象</h4> <p>Web浏览器是将Global对象这个全局对象作为window对象的一部分加以实现的，全局执行环境中的变量对象可以认为是window对象，this在默认绑定形式下绑定的是window对象。</p> <h3 id="_7-2-math对象"><a href="#_7-2-math对象" class="header-anchor">#</a> 7.2 Math对象</h3> <p>用来保存数学公式和信息，Math提供的方法要比自己设计的计算功能执行起来要快。</p> <h4 id="_7-2-1-math对象属性"><a href="#_7-2-1-math对象属性" class="header-anchor">#</a> 7.2.1 Math对象属性</h4> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td>Math.E</td> <td>自然对数的底数，即常量e的值</td></tr> <tr><td>Math.LN10</td> <td>10的自然对数</td></tr> <tr><td>Math.LN2</td> <td>2的自然对数</td></tr> <tr><td>Math.LOG2E</td> <td>以2为底e的对数</td></tr> <tr><td>Math.LOG10E</td> <td>以10为底e的对数</td></tr> <tr><td>Math.PI</td> <td>π的值</td></tr> <tr><td>Math.SQRT1_2</td> <td>1/2的平方根</td></tr> <tr><td>Math.SQRT2</td> <td>2的平方根</td></tr></tbody></table> <h4 id="_7-2-2-min-max最大最小值"><a href="#_7-2-2-min-max最大最小值" class="header-anchor">#</a> 7.2.2 min/max最大最小值</h4> <ul><li><p><code>Math.min()</code>和<code>Math.max()</code>都可以接受任意多个数值参数，用于确定这组数值中 <strong>最大和最小值</strong>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 54</span>
<span class="token keyword">var</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><code>Math.min()</code>和<code>Math.max()</code>可以配合<code>apply()</code>来求一个数组的最大和最小值，也就不用再一个个传给<code>Math.min()</code>和<code>Math.max()</code>了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// max方法是Math里的，那么apply的第一个参数自然是Math</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h4 id="_7-2-3-ceil-round-floor取整"><a href="#_7-2-3-ceil-round-floor取整" class="header-anchor">#</a> 7.2.3 ceil/round/floor取整</h4> <ul><li><code>Math.ceil()</code>向上取整</li> <li><code>Math.round()</code>四舍五入</li> <li><code>Math.floor()</code>向下取整</li></ul> <h4 id="_7-2-4-random取随机数"><a href="#_7-2-4-random取随机数" class="header-anchor">#</a> 7.2.4 random取随机数</h4> <p><code>Math.random()</code>返回大于等于0小于1的一个随机数，也就是返回[0, 1)区间的一个整数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 函数的作用：返回[lower, upper]区间里的整数</span>
<span class="token keyword">function</span> <span class="token function">selectFrom</span><span class="token punctuation">(</span><span class="token parameter">lower<span class="token punctuation">,</span> upper</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> choices <span class="token operator">=</span> upper <span class="token operator">-</span> lower <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// 加1的原因是结果可以等于upper，需要“加一”并配合“向下取整”</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> choices <span class="token operator">+</span> lower<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 加lower自然是因为最后的区间从lower开始的</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token function">selectFrom</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 随机返回[2, 10]区间里的整数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_7-2-5-其他方法"><a href="#_7-2-5-其他方法" class="header-anchor">#</a> 7.2.5 其他方法</h4> <table><thead><tr><th>方法</th> <th>说明</th> <th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>Math.abs(num)</td> <td>返回num的绝对值</td> <td>Math.asin(x)</td> <td>返回x的反正弦值</td></tr> <tr><td>Math.exp(num)</td> <td>返回Math.E的num次幂</td> <td>Math.atan(x)</td> <td>返回x的反正切值</td></tr> <tr><td>Math.log(num)</td> <td>返回num的自然对数</td> <td>Math.atan2(y,x)</td> <td>返回y/x的反正切值</td></tr> <tr><td>Math.pow(num, power)</td> <td>返回num的power次幂</td> <td>Math.cos(x)</td> <td>返回x的余弦值</td></tr> <tr><td>Math.sqrt(num)</td> <td>返回num的平方根</td> <td>Math.sin(x)</td> <td>返回x的正弦值</td></tr> <tr><td>Math.acos(x)</td> <td>返回x的反余弦值</td> <td>Math.tan(x)</td> <td>返回x的正切值</td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/6/2022, 3:41:21 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/2.变量、作用域和内存问题.html" class="prev">
        2.变量、作用域和内存问题
      </a></span> <span class="next"><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/4.面向对象程序设计.html">
        4.面向对象程序设计
      </a>
      →
    </span></p></div> </main> <div class="right-sidebar-wrapper right-sidebar-hidden"><aside class="right-sidebar"><ul><h4>本文目录</h4></ul></aside> <div class="sidebar-toggle" data-v-10bfdc0c><div class="sidebar-toggle-button" data-v-10bfdc0c><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span></div></div></div></div><div class="global-ui"></div></div>
    <script src="/blog-vuepress/assets/js/app.0d2e1fde.js" defer></script><script src="/blog-vuepress/assets/js/2.a046c74e.js" defer></script><script src="/blog-vuepress/assets/js/70.a3316969.js" defer></script>
  </body>
</html>
