<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.globals和模块 | Liawn&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <meta charset="UTF-8">
  <link rel="icon" href="/blog-vuepress/favicon.ico">
  <link rel="manifest" href="/blog-vuepress/manifest.json">
  <meta name="theme-color" content="#ffffff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/blog-vuepress/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/blog-vuepress/safari-pinned-tab.svg" color="#ffffff">
  <meta name="msapplication-TileImage" content="/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    <meta name="description" content="用vuepress搭建的个人博客">
    <meta charset="UTF-8">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/blog-vuepress/assets/css/0.styles.2f620dda.css" as="style"><link rel="preload" href="/blog-vuepress/assets/js/app.34680ebc.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/2.1e7adb41.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/98.8e445314.js" as="script"><link rel="preload" href="/blog-vuepress/assets/js/38.cec9a03e.js" as="script"><link rel="prefetch" href="/blog-vuepress/assets/js/10.1e723314.js"><link rel="prefetch" href="/blog-vuepress/assets/js/100.311567ba.js"><link rel="prefetch" href="/blog-vuepress/assets/js/101.ef72e26e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/102.c3759919.js"><link rel="prefetch" href="/blog-vuepress/assets/js/103.98e877a9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/104.e27de6a0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/105.3a1ef548.js"><link rel="prefetch" href="/blog-vuepress/assets/js/106.59ee0f92.js"><link rel="prefetch" href="/blog-vuepress/assets/js/107.e68abe87.js"><link rel="prefetch" href="/blog-vuepress/assets/js/108.8fcda232.js"><link rel="prefetch" href="/blog-vuepress/assets/js/109.422d008d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/11.58bde1dd.js"><link rel="prefetch" href="/blog-vuepress/assets/js/110.f713fc26.js"><link rel="prefetch" href="/blog-vuepress/assets/js/111.58efaae4.js"><link rel="prefetch" href="/blog-vuepress/assets/js/112.c6bdfbe0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/113.8dbd693e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/114.8a85e37a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/115.54a6972e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/116.56b2d8b8.js"><link rel="prefetch" href="/blog-vuepress/assets/js/117.11470546.js"><link rel="prefetch" href="/blog-vuepress/assets/js/118.1a39e213.js"><link rel="prefetch" href="/blog-vuepress/assets/js/119.41f15fbd.js"><link rel="prefetch" href="/blog-vuepress/assets/js/12.613505ee.js"><link rel="prefetch" href="/blog-vuepress/assets/js/120.9ac14643.js"><link rel="prefetch" href="/blog-vuepress/assets/js/121.83954220.js"><link rel="prefetch" href="/blog-vuepress/assets/js/122.bef8fade.js"><link rel="prefetch" href="/blog-vuepress/assets/js/123.25446ff9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/124.6acf9e60.js"><link rel="prefetch" href="/blog-vuepress/assets/js/125.42c6fb5e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/126.b9b98daa.js"><link rel="prefetch" href="/blog-vuepress/assets/js/127.382eea79.js"><link rel="prefetch" href="/blog-vuepress/assets/js/13.75740994.js"><link rel="prefetch" href="/blog-vuepress/assets/js/14.febc6ec1.js"><link rel="prefetch" href="/blog-vuepress/assets/js/15.6e16849c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/16.70db9d99.js"><link rel="prefetch" href="/blog-vuepress/assets/js/17.f098e403.js"><link rel="prefetch" href="/blog-vuepress/assets/js/18.21ad25ae.js"><link rel="prefetch" href="/blog-vuepress/assets/js/19.4b561714.js"><link rel="prefetch" href="/blog-vuepress/assets/js/20.8dae8a78.js"><link rel="prefetch" href="/blog-vuepress/assets/js/21.7d09e2a3.js"><link rel="prefetch" href="/blog-vuepress/assets/js/22.7838f809.js"><link rel="prefetch" href="/blog-vuepress/assets/js/23.2444198c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/24.099866db.js"><link rel="prefetch" href="/blog-vuepress/assets/js/25.d059d716.js"><link rel="prefetch" href="/blog-vuepress/assets/js/26.243af3f2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/27.97e455c9.js"><link rel="prefetch" href="/blog-vuepress/assets/js/28.97ce9b54.js"><link rel="prefetch" href="/blog-vuepress/assets/js/29.392d550e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/3.49db6791.js"><link rel="prefetch" href="/blog-vuepress/assets/js/30.9161535d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/31.46b99656.js"><link rel="prefetch" href="/blog-vuepress/assets/js/32.c2fd0854.js"><link rel="prefetch" href="/blog-vuepress/assets/js/33.3080b8a5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/34.e15baec0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/35.f144a7bd.js"><link rel="prefetch" href="/blog-vuepress/assets/js/36.e1175535.js"><link rel="prefetch" href="/blog-vuepress/assets/js/37.72ec58bc.js"><link rel="prefetch" href="/blog-vuepress/assets/js/39.fc6f4606.js"><link rel="prefetch" href="/blog-vuepress/assets/js/4.eca03551.js"><link rel="prefetch" href="/blog-vuepress/assets/js/40.b74ded47.js"><link rel="prefetch" href="/blog-vuepress/assets/js/41.cee8cec1.js"><link rel="prefetch" href="/blog-vuepress/assets/js/42.7f4e1373.js"><link rel="prefetch" href="/blog-vuepress/assets/js/43.10c6d899.js"><link rel="prefetch" href="/blog-vuepress/assets/js/44.4f190d43.js"><link rel="prefetch" href="/blog-vuepress/assets/js/45.5c2f36ae.js"><link rel="prefetch" href="/blog-vuepress/assets/js/46.9a5337f5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/47.161b10c1.js"><link rel="prefetch" href="/blog-vuepress/assets/js/48.93192e20.js"><link rel="prefetch" href="/blog-vuepress/assets/js/49.72ba1cc4.js"><link rel="prefetch" href="/blog-vuepress/assets/js/5.aacc9c46.js"><link rel="prefetch" href="/blog-vuepress/assets/js/50.bfc0c26a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/51.05bbb696.js"><link rel="prefetch" href="/blog-vuepress/assets/js/52.84b5a67c.js"><link rel="prefetch" href="/blog-vuepress/assets/js/53.220715ca.js"><link rel="prefetch" href="/blog-vuepress/assets/js/54.d433d73f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/55.f8221d0f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/56.2ec79246.js"><link rel="prefetch" href="/blog-vuepress/assets/js/57.01a3b85e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/58.9015a667.js"><link rel="prefetch" href="/blog-vuepress/assets/js/59.73311086.js"><link rel="prefetch" href="/blog-vuepress/assets/js/6.0c335663.js"><link rel="prefetch" href="/blog-vuepress/assets/js/60.976cf8cc.js"><link rel="prefetch" href="/blog-vuepress/assets/js/61.4a1c95f1.js"><link rel="prefetch" href="/blog-vuepress/assets/js/62.865f814a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/63.0d882dec.js"><link rel="prefetch" href="/blog-vuepress/assets/js/64.c74f770a.js"><link rel="prefetch" href="/blog-vuepress/assets/js/65.0d5262a8.js"><link rel="prefetch" href="/blog-vuepress/assets/js/66.1cd8fc00.js"><link rel="prefetch" href="/blog-vuepress/assets/js/67.a73db0e8.js"><link rel="prefetch" href="/blog-vuepress/assets/js/68.2fe7b184.js"><link rel="prefetch" href="/blog-vuepress/assets/js/69.763746bf.js"><link rel="prefetch" href="/blog-vuepress/assets/js/7.09a81cb8.js"><link rel="prefetch" href="/blog-vuepress/assets/js/70.2f10d153.js"><link rel="prefetch" href="/blog-vuepress/assets/js/71.f0476a16.js"><link rel="prefetch" href="/blog-vuepress/assets/js/72.b3aa24c4.js"><link rel="prefetch" href="/blog-vuepress/assets/js/73.d90b4378.js"><link rel="prefetch" href="/blog-vuepress/assets/js/74.5f3afc25.js"><link rel="prefetch" href="/blog-vuepress/assets/js/75.610a9393.js"><link rel="prefetch" href="/blog-vuepress/assets/js/76.397a07d0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/77.a7a16098.js"><link rel="prefetch" href="/blog-vuepress/assets/js/78.0a76e3c0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/79.d9bf3b6d.js"><link rel="prefetch" href="/blog-vuepress/assets/js/8.7a4382cf.js"><link rel="prefetch" href="/blog-vuepress/assets/js/80.6653af85.js"><link rel="prefetch" href="/blog-vuepress/assets/js/81.7bfd7632.js"><link rel="prefetch" href="/blog-vuepress/assets/js/82.e5ec57b6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/83.7728c890.js"><link rel="prefetch" href="/blog-vuepress/assets/js/84.dd67c36e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/85.7387a0e5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/86.bbfe7f7f.js"><link rel="prefetch" href="/blog-vuepress/assets/js/87.2de3f2a7.js"><link rel="prefetch" href="/blog-vuepress/assets/js/88.809122f0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/89.321e8e47.js"><link rel="prefetch" href="/blog-vuepress/assets/js/9.26929067.js"><link rel="prefetch" href="/blog-vuepress/assets/js/90.5ce6c826.js"><link rel="prefetch" href="/blog-vuepress/assets/js/91.075154c5.js"><link rel="prefetch" href="/blog-vuepress/assets/js/92.11b94685.js"><link rel="prefetch" href="/blog-vuepress/assets/js/93.a9d4d5f0.js"><link rel="prefetch" href="/blog-vuepress/assets/js/94.306ece7e.js"><link rel="prefetch" href="/blog-vuepress/assets/js/95.817525f6.js"><link rel="prefetch" href="/blog-vuepress/assets/js/96.beed2305.js"><link rel="prefetch" href="/blog-vuepress/assets/js/97.b4c539f2.js"><link rel="prefetch" href="/blog-vuepress/assets/js/99.558669ea.js">
    <link rel="stylesheet" href="/blog-vuepress/assets/css/0.styles.2f620dda.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><a href="/blog-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">Liawn's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog-vuepress/book-web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/blog-vuepress/book-sketches/" class="nav-link">
  生活
</a></div> <!----></nav></div></header> <div class="sidebar-wrapper sidebar-hidden"><aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog-vuepress/book-web/" class="nav-link router-link-active">
  Web
</a></div><div class="nav-item"><a href="/blog-vuepress/book-sketches/" class="nav-link">
  生活
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>web前端</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习JavaScript/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习JavaScript</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习CSS/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习CSS</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/html、css、js、ts/学习TypeScript/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习TypeScript</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/web前端js框架/学习Vue/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习Vue</span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/web前端js框架/学习React/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习React</span></a> <!----></section></li><li><a href="/blog-vuepress/book-web/web前端js框架/学习jQuery.html" class="sidebar-link">jQueryNote</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/LayaBox游戏引擎/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>H5游戏引擎Laya</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>常用工具</span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-vuepress/book-web/常用工具/Npm的使用.html" class="sidebar-link">Npm 的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/Git的使用.html" class="sidebar-link">Git 的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/webpack的使用.html" class="sidebar-link">webpack 的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/VSCode的使用.html" class="sidebar-link">VSCode 的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/Chrome的使用.html" class="sidebar-link">Chrome 的使用</a></li><li><a href="/blog-vuepress/book-web/常用工具/使用vuepress写blog.html" class="sidebar-link">使用 vuepress 写 blog</a></li><li><a href="/blog-vuepress/book-web/常用工具/使用docsify写blog.html" class="sidebar-link">使用 docsify 写 blog</a></li><li><a href="/blog-vuepress/book-web/常用工具/使用gitbook写blog.html" class="sidebar-link">使用 gitbook 写 blog</a></li><li><a href="/blog-vuepress/book-web/web前端测试与调试/基于mocha+chai的单元测试.html" class="sidebar-link">使用 mocha+chai 进行单元测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span>Web后端</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/web后端/学习node.js/" class="sidebar-heading clickable open"><span class="arrow down"></span> <span>学习node.js</span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-vuepress/book-web/web后端/学习node.js/1.globals和模块.html" class="active sidebar-link">1.globals和模块</a></li><li><a href="/blog-vuepress/book-web/web后端/学习node.js/2.Buffer缓存区和path路径.html" class="sidebar-link">2.Buffer缓存区和path路径</a></li><li><a href="/blog-vuepress/book-web/web后端/学习node.js/3.文件和目录操作.html" class="sidebar-link">3.文件和目录操作</a></li><li><a href="/blog-vuepress/book-web/web后端/学习node.js/4.http传输相关.html" class="sidebar-link">4.http传输相关</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/web后端/学习python/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>学习python</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>简单项目实践</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/项目/react+express+ts写爬虫/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>react+express+ts写爬虫</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>数据结构与算法</span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/blog-vuepress/book-web/数据结构与算法/" class="sidebar-heading clickable"><span class="arrow right"></span> <span>数据结构与算法ts版</span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span>面试准备</span></p> <!----></section></li></ul> </aside> <div class="sidebar-toggle" data-v-10bfdc0c><div class="sidebar-toggle-button" data-v-10bfdc0c><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span></div></div></div> <main class="page sidebar-hidden right-sidebar-hidden"> <div class="theme-default-content content__default"><h1 id="globals-和模块"><a href="#globals-和模块" class="header-anchor">#</a> globals 和模块</h1> <h2 id="globals"><a href="#globals" class="header-anchor">#</a> globals</h2> <p><code>globals</code> 表示 NodeJs 中的全局属性和全局方法的，意思是在所有模块中都能使用。</p> <p><code>globals</code>中有个<code>global</code>，表示当前模块中的全局命名空间对象，如果将某些属性或方法放到<code>global</code>里的话，就能在其他模块中通过访问这些属性或方法（必须先<code>require</code>）。例如把<code>var a</code>放到浏览器的<code>window</code>上，那么在任何地方都能使用。而在 NodeJs 中就是放在它当前所在模块中 global 里，其他模块才能访问，否则就访问不了，具体就是下小一节的<a href="/blog-vuepress/book-web/web后端/学习node.js/1.globals和模块.html#CommonJs模块">CommonJs 模块</a>。</p> <p><strong>a.js</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;ll&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">sayName: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;module 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

global<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
global<span class="token punctuation">.</span>sayName <span class="token operator">=</span> sayName<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>b.js</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 这里的require不能去掉，因为global仍属于模块的，这里必须让b.js与a.js建立依赖关系才能使用name和sayName</span>
<span class="token keyword">const</span> aModule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>以下属性或方法，都是表示它当前所在模块的一些信息和方法。每个模块都有这些方法，这就导致它们看起来像是全局的<code>globals</code>。</p> <ul><li><code>__dirname</code>：当前模块的目录名</li> <li><code>__filename</code>：当前模块的文件名。这是当前模块文件的绝对路径，符号链接已解析</li> <li><code>exports</code>：模块导出</li> <li><code>module</code>：对模块的引用</li> <li><code>require()</code>：导入模块或文件</li></ul> <p>其他的<code>globals</code></p> <ul><li><code>console</code>：用于打印到 stdout 和 stderr</li> <li><code>process</code>：进程对象</li> <li><code>queueMicrotask(callback)</code>：放入微任务队列</li> <li><code>setImmediate(callback[, ...args])</code>：本轮事件循环结束后调用</li> <li><code>setInterval(callback, delay[, ...args])</code>：间隔一段时间重复执行</li> <li><code>setTimeout(callback, delay[, ...args])</code>：间隔一段时间执行一次</li> <li><code>clearImmediate(immediateObject)</code>：清除由<code>setImmediate</code>创建的定时器</li> <li><code>clearInterval(timeout)</code>：清除由<code>setInterval</code>创建的定时器</li> <li><code>clearTimeout(timeout)</code>：清除由<code>setTimeout</code>创建的定时器</li> <li><code>TextDecoder</code>：WHATWG 编码标准 TextDecoderAPI 的实现</li> <li><code>TextEncoder</code>：WHATWG 编码标准 TextEncoderAPI 的实现</li> <li><code>URL</code>：按照 WHATWG URL 标准实现的浏览器兼容 URL 类</li> <li><code>URLSearchParams</code>：URLSearchParams API 提供对 URL 查询的读写访问</li> <li><code>WebAssembly</code>：充当所有 W3C WebAssembly 相关功能的命名空间的对象</li></ul> <h2 id="模块"><a href="#模块" class="header-anchor">#</a> 模块</h2> <h3 id="何为模块"><a href="#何为模块" class="header-anchor">#</a> 何为模块</h3> <p>就是将一个项目中的 js 拆分成一个个独立的部分，以方便模块复用和维护。模块是不同于<code>&lt;script&gt;</code>的，它具有“依赖关系”、“命名空间”、“代码组织”等特点，可以解决“js 文件加载顺序”、“全局属性/方法”、“代码隔离”等问题。</p> <h3 id="commonjs-规范"><a href="#commonjs-规范" class="header-anchor">#</a> CommonJs 规范</h3> <p>NodeJs 采用 CommonJs 规范实现了模块系统。CommonJs 规范规定了如何定义一个模块，如何暴露（导出）模块中的变量函数，以及如何使用定义好的模块。</p> <ul><li>在 CommonJs 规范中，一个文件就是一个模块。</li> <li>在 CommonJs 规范中，每个文件中的变量函数都是私有的，对其他文件不可见。</li> <li>在 CommonJs 规范中，每个文件中的变量函数必须通过<code>exports</code>或者<code>module.exports</code>暴露（导出）之后才能被其他文件引用。</li> <li>在 CommonJs 规范中，想要使用其他文件暴露的变量函数必须通过<code>require</code>导入模块才可以使用。</li></ul> <h3 id="模块导出"><a href="#模块导出" class="header-anchor">#</a> 模块导出</h3> <p>在<a href="/blog-vuepress/book-web/web后端/学习node.js/1.globals和模块.html#globals">globals</a>就讲过了将属性或方法放到<code>global</code>供其他模块使用，但这不算是 CommonJs 规范式的模块使用，真正符合 CommonJs 规范式模块使用例子如下：</p> <p><strong>a.js</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;ll&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">sayName: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;module 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">,</span>
  <span class="token literal-property property">say</span><span class="token operator">:</span> sayName<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 或者</span>
<span class="token comment">/* exports.name = name;
exports.aaa = sayName;
 */</span>
<span class="token comment">// 注意！！！导出是{}，意味着导出失败</span>
<span class="token comment">/* exports = {
  name,
  sayName
} */</span>
<span class="token comment">// 注意！！！导出是sayName，意味着覆盖了，只导出了最后一次赋值</span>
<span class="token comment">/* module.exports = name;
module.exports = sayName; */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>b.js</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> say <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以看到<code>exports</code>和<code>module.exports</code>并不是完全相同的，<code>exports</code>只能用<code>exports.xxx = xxx</code>来导出并不能直接给<code>exports</code>赋值，就算赋值了也是<code>{}</code>空对象；而<code>module.exports</code>可以是<code>module.exports.xxx = xxx</code>也可以<code>module.exports = xxx</code>，只是<code>module.exports = xxx</code>只能保证最后一次赋值被导出。</p> <h3 id="模块导入"><a href="#模块导入" class="header-anchor">#</a> 模块导入</h3> <p>模块导入是<code>const xx = require(&quot;xxx&quot;)</code>。它有一些注意点：</p> <ol><li>require 导入模块时可以不添加导入模块的<strong>类型</strong> <ul><li>如果没有指定导入模块的类型，那么会依次查找<code>.js</code>、<code>.json</code>、<code>.node</code>文件。</li> <li>无论是三种类型中的哪一种，导入之后都会转换成 JS 对象返回给我们</li></ul></li> <li>导入自定义模块时必须指定路径
<ul><li>require 可以导入“自定义模块（文件模块）”、“系统模块（核心模块）”、“第三方模块”</li> <li>导入“自定义模块”时，前面必须加上路径</li> <li>导入“系统模块”和“第三方模块”时，是不用添加路径的</li></ul></li></ol> <h3 id="es6-模块"><a href="#es6-模块" class="header-anchor">#</a> ES6 模块</h3> <p>NodeJs8.5 版本将 ES6 的模块添加了进来，NodeJs14.17 版本才稳定下来。</p> <p>如何在 NodeJs 中使用 ES6 模块</p> <ul><li>在以<code>.mjs</code>为文件扩展名的文件中，就可以使用 ES6 模块。</li> <li>不用<code>.mjs</code>的话，可以修改 package.json &quot;type&quot; 字段。如果该字段<strong>不填</strong>或者填写<code>commonjs</code>，那么 NodeJs 会认为你将使用 CommonJs 规范的模块。如果设为<code>module</code>，那就认为你使用 ES6 模块。</li> <li><code>--input-type=module</code> 标志告诉 Node.js。</li></ul> <p><strong>a.mjs</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;ll&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">sayName: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;module 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> sayName <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>b.mjs</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> sayName <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./a.mjs&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ES6 模块和 CommonJs 模块差异</p> <ul><li><p>没有 require、exports 或 module.exports。在大多数情况下，可以使用 ES 模块 import 加载 CommonJS 模块。如果需要，可以使用 module.createRequire() 在 ES 模块中构造 require 函数。</p></li> <li><p>没有 **filename 或 **dirname。这些 CommonJS 变量在 ES 模块中不可用。</p></li> <li><p>没有 JSON 模块加载。JSON 导入仍处于实验阶段，仅通过 --experimental-json-modules 标志支持。本地 JSON 文件可以直接用 fs 相对于 import.meta.url 加载。也可以使用 module.createRequire()。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;fs/promises&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&quot;./dat.json&quot;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>没有原生模块加载，ES 模块导入当前不支持原生模块。它们可以改为加载 module.createRequire() 或 process.dlopen。</p></li> <li><p>没有 require.resolve。相对解析可以通过 new URL('./local', import.meta.url) 处理。对于完整的 require.resolve 替换，有标记的实验性 import.meta.resolve API。</p></li> <li><p>没有 NODE_PATH，NODE_PATH 不是解析 import 说明符的一部分。 如果需要这种行为，则使用符号链接。</p></li> <li><p>没有 require.extensions，require.extensions 没有被 import 使用。 期望加载器钩子在未来可以提供这个工作流。</p></li> <li><p>没有 require.cache，require.cache 没有被 import 使用，因为 ES 模块加载器有自己独立的缓存。</p></li></ul> <h2 id="包、npm、yarn"><a href="#包、npm、yarn" class="header-anchor">#</a> 包、Npm、Yarn</h2> <p><strong>包</strong>是一个或多个模块组成的一个集合（或者说是一个项目），使用本地的包或者模块时直接使用<code>require(路径+模块名)</code>，如果你想使用第三方包，那就需要包管理工具 Npm 或者 Yarn。</p> <p>关于 Npm 可以看<a href="/blog-vuepress/book-web/常用工具/Npm的使用.html">Npm 的使用</a>。关于 Yarn 可以看<a href="https://yarn.bootcss.com/docs/usage" target="_blank" rel="noopener noreferrer">Yarn 官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog-vuepress/book-web/web前端测试与调试/基于mocha+chai的单元测试.html" class="prev">
        使用 mocha+chai 进行单元测试
      </a></span> <span class="next"><a href="/blog-vuepress/book-web/web后端/学习node.js/2.Buffer缓存区和path路径.html">
        2.Buffer缓存区和path路径
      </a>
      →
    </span></p></div> </main> <div class="right-sidebar-wrapper right-sidebar-hidden"><aside class="right-sidebar"><div><div class="title">本文目录</div><h1><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#globals-和模块" title="globals 和模块">globals 和模块</a></h1><h2><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#globals" title="globals">globals</a></h2><h2><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#模块" title="模块">模块</a></h2><h3><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#何为模块" title="何为模块">何为模块</a></h3><h3><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#commonjs-规范" title="CommonJs 规范">CommonJs 规范</a></h3><h3><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#模块导出" title="模块导出">模块导出</a></h3><h3><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#模块导入" title="模块导入">模块导入</a></h3><h3><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#es6-模块" title="ES6 模块">ES6 模块</a></h3><h2><a href="/blog-vuepress/book-web/web%E5%90%8E%E7%AB%AF/%E5%AD%A6%E4%B9%A0node.js/1.globals%E5%92%8C%E6%A8%A1%E5%9D%97.html#包、npm、yarn" title="包、Npm、Yarn">包、Npm、Yarn</a></h2></div></aside> <div class="sidebar-toggle" data-v-10bfdc0c><div class="sidebar-toggle-button" data-v-10bfdc0c><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span><span data-v-10bfdc0c></span></div></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/blog-vuepress/assets/js/app.34680ebc.js" defer></script><script src="/blog-vuepress/assets/js/2.1e7adb41.js" defer></script><script src="/blog-vuepress/assets/js/98.8e445314.js" defer></script><script src="/blog-vuepress/assets/js/38.cec9a03e.js" defer></script>
  </body>
</html>
